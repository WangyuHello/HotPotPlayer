<ResourceDictionary
    x:Class="HotPotPlayer.Templates.CardTemplates"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:models="using:HotPotPlayer.Models"
    xmlns:modelsC="using:HotPotPlayer.Models.CloudMusic"
    xmlns:jmodel="using:Jellyfin.Sdk.Generated.Models"
    xmlns:bmodel="using:Richasy.BiliKernel.Models.Media"
    xmlns:bili="using:HotPotPlayer.Bilibili.Models.HomeVideo"
    xmlns:bili2="using:HotPotPlayer.Bilibili.Models.Video"
    xmlns:bili3="using:HotPotPlayer.Bilibili.Models.User"
    xmlns:bili4="using:HotPotPlayer.Bilibili.Models.Search"
    xmlns:biliHis="using:HotPotPlayer.Bilibili.Models.History"
    xmlns:biliext="using:HotPotPlayer.Bilibili.Extensions"
    xmlns:cont2="using:HotPotPlayer.UI.Controls"
    xmlns:ui="using:CommunityToolkit.WinUI"
    xmlns:media="using:CommunityToolkit.WinUI.Media"
    xmlns:ani="using:CommunityToolkit.WinUI.Animations"
    xmlns:behaviors="using:CommunityToolkit.WinUI.Behaviors"
    xmlns:interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:conv="using:HotPotPlayer.UI.Converters"
    xmlns:helper="using:HotPotPlayer.Pages.Helper"
    xmlns:helper2="using:HotPotPlayer.Helpers"
    xmlns:ext="using:HotPotPlayer.UI.Extensions"
    >

    <helper:LikeGlyphConverter x:Key="LikeGlyphConverter" />

    <DataTemplate x:Key="MusicCardViewTemplate" x:DataType="models:MusicItem">
        <StackPanel
            Width="170"
            Spacing="8" 
            Padding="0,0,0,12"
            x:Name="MusicCardConnectedElement"
            BorderBrush="{ThemeResource ButtonBorderBrush}"
            BorderThickness="{ThemeResource ButtonBorderThemeThickness}"
            CornerRadius="4"
            ui:VisualExtensions.NormalizedCenterPoint="0.5"
            Background="White"
            >
            <cont2:ImageEx2 
                Source="{x:Bind Cover}" 
                Style="{StaticResource LocalMusicImageStyle}" 
                x:Phase="2" 
                />
            <TextBlock 
                Margin="8,0" 
                Text="{x:Bind Title}" 
                LineStackingStrategy="BaselineToBaseline" 
                FontSize="14" 
                MaxLines="2" 
                TextTrimming="CharacterEllipsis" 
                TextWrapping="Wrap" 
                Height="40" 
                ToolTipService.ToolTip="{x:Bind Title}" 
                x:Phase="0" 
                FontFamily="{ThemeResource MiSansBold}"
                />
            <TextBlock 
                Margin="8,0" 
                Text="{x:Bind GetArtists()}" 
                Foreground="Gray" 
                ToolTipService.ToolTip="{x:Bind GetArtists()}" 
                x:Phase="1" 
                TextTrimming="CharacterEllipsis" 
                FontFamily="{ThemeResource MiSansRegular}"
                />
        </StackPanel>
    </DataTemplate>

    <DataTemplate x:Key="AlbumCardViewTemplate" x:DataType="jmodel:BaseItemDto">
        <Grid
            Width="170"
            Padding="0,0,0,12" 
            x:Name="AlbumCardConnectedElement"
            BorderBrush="{ThemeResource ButtonBorderBrush}"
            BorderThickness="{ThemeResource ButtonBorderThemeThickness}"
            CornerRadius="4"
            ui:VisualExtensions.NormalizedCenterPoint="0.5"
            Background="White"
            >
            <StackPanel Spacing="8">
                <cont2:ImageEx2 
                    Source="{x:Bind helper2:BaseItemDtoHelper.GetPrimaryJellyfinImageWithBlur(ImageTags, ImageBlurHashes, Id)}" 
                    Style="{StaticResource LocalMusicImageStyle}" 
                    x:Phase="2" 
                />
                <TextBlock 
                    Margin="8,0" 
                    Text="{x:Bind Name}" 
                    LineStackingStrategy="BaselineToBaseline" 
                    FontSize="14" 
                    MaxLines="2" 
                    TextTrimming="CharacterEllipsis" 
                    TextWrapping="Wrap" 
                    Height="40" 
                    ToolTipService.ToolTip="{x:Bind Name}" 
                    x:Phase="0" 
                    FontFamily="{ThemeResource MiSansBold}"
                />
                <TextBlock 
                    Margin="8,0" 
                    Text="{x:Bind AlbumArtist}" 
                    Foreground="Gray" 
                    ToolTipService.ToolTip="{x:Bind AlbumArtist}" 
                    x:Phase="1" 
                    FontFamily="{ThemeResource MiSansRegular}"
                />
                <TextBlock 
                    Margin="8,0" 
                    Text="{x:Bind ProductionYear}" 
                    Foreground="Gray" 
                    ToolTipService.ToolTip="{x:Bind ProductionYear}" 
                    FontSize="14"
                    x:Phase="3" 
                    FontFamily="{ThemeResource MiSansNormal}"
                />
            </StackPanel>
            <Grid x:Name="HiddenContent" Visibility="Collapsed">
                <Button Style="{StaticResource TransparentButton}"
                        HorizontalAlignment="Center"
                        Padding="12"
                        Margin="0,-70,0,0"
                        CornerRadius="32"
                        Background="#99FFFFFF"
                        Tag="{x:Bind }"
                        Click="{x:Bind helper:AlbumHelper.AlbumPlay}">
                    <FontIcon FontFamily="{ThemeResource SegoeIcons}" Glyph="&#xE768;" FontSize="24"/>
                </Button>
                <StackPanel 
                    Margin="0,0,8,0"
                    Padding="8,0,0,0"
                    HorizontalAlignment="Right" 
                    VerticalAlignment="Bottom" 
                    Orientation="Horizontal"
                    Spacing="8"
                    Background="White"
                >
                    <Button Style="{StaticResource TransparentButton}" Foreground="Gray" >
                        <FontIcon FontFamily="{ThemeResource SegoeIcons}" Glyph="&#xE734;" FontSize="18"/>
                    </Button>
                    <Button Style="{StaticResource TransparentButton}" Foreground="Gray" >
                        <FontIcon FontFamily="{ThemeResource SegoeIcons}" Glyph="&#xE712;" FontSize="18"/>
                    </Button>
                </StackPanel>
            </Grid>

            <!--<ui:Effects.Shadow>
                <media:AttachedCardShadow Offset="4" CornerRadius="0"/>
            </ui:Effects.Shadow>-->
            <ani:Explicit.Animations>
                <ani:AnimationSet x:Name="ScaleEnterAnimation" >
                    <!--<ani:OffsetDropShadowAnimation To="12"/>-->
                    <ani:ScaleAnimation To="1.1" Duration="0:0:0.3"/>
                </ani:AnimationSet>

                <ani:AnimationSet x:Name="ScaleExitAnimation">
                    <!--<ani:OffsetDropShadowAnimation To="4"/>-->
                    <ani:ScaleAnimation To="1.0" Duration="0:0:0.3"/>
                </ani:AnimationSet>
            </ani:Explicit.Animations>
            <interactivity:Interaction.Behaviors>
                <interactivity:EventTriggerBehavior EventName="PointerEntered">
                    <!--<behaviors:StartAnimationAction Animation="{x:Bind ShadowEnterAnimation}"/>-->
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleEnterAnimation}"/>
                    <interactivity:ChangePropertyAction TargetObject="{Binding ElementName=HiddenContent}" PropertyName="Visibility" Value="Visible" />
                </interactivity:EventTriggerBehavior>
                <interactivity:EventTriggerBehavior EventName="PointerExited">
                    <!--<behaviors:StartAnimationAction Animation="{x:Bind ShadowExitAnimation}"/>-->
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleExitAnimation}"/>
                    <interactivity:ChangePropertyAction TargetObject="{Binding ElementName=HiddenContent}" PropertyName="Visibility" Value="Collapsed" />
                </interactivity:EventTriggerBehavior>
            </interactivity:Interaction.Behaviors>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="AlbumCardViewInArtistTemplate" x:DataType="jmodel:BaseItemDto">
        <StackPanel 
            Width="140"
            Spacing="4" 
            Padding="0,0,0,0" 
            x:Name="AlbumCardConnectedElement"
            BorderBrush="{ThemeResource ButtonBorderBrush}"
            BorderThickness="{ThemeResource ButtonBorderThemeThickness}"
            CornerRadius="4"
            ui:VisualExtensions.NormalizedCenterPoint="0.5"
            Background="White"
            >
            <cont2:ImageEx2 
                Source="{x:Bind helper2:BaseItemDtoHelper.GetPrimaryJellyfinImageWithBlur(ImageTags, ImageBlurHashes, Id)}" 
                Style="{StaticResource LocalMusicImageStyle}" 
                Width="140" Height="140"
                x:Phase="2" 
                />
            <TextBlock 
                Margin="8,0" 
                Text="{x:Bind Name}" 
                LineStackingStrategy="BaselineToBaseline" 
                FontSize="14" 
                MaxLines="2" 
                TextTrimming="CharacterEllipsis" 
                TextWrapping="Wrap" 
                Height="38" 
                ToolTipService.ToolTip="{x:Bind Name}" 
                x:Phase="0" 
                FontFamily="{ThemeResource MiSansBold}"
                />
            <TextBlock 
                Margin="8,0" 
                Text="{x:Bind helper2:BaseItemDtoHelper.GetJellyfinArtists(Artists)}" 
                Foreground="Gray" 
                ToolTipService.ToolTip="{x:Bind helper2:BaseItemDtoHelper.GetJellyfinArtists(Artists)}" 
                x:Phase="1" 
                FontFamily="{ThemeResource MiSansRegular}"
                />

            <ani:Explicit.Animations>
                <ani:AnimationSet x:Name="ScaleEnterAnimation" >
                    <!--<ani:OffsetDropShadowAnimation To="12"/>-->
                    <ani:ScaleAnimation To="1.1" Duration="0:0:0.3"/>
                </ani:AnimationSet>

                <ani:AnimationSet x:Name="ScaleExitAnimation">
                    <!--<ani:OffsetDropShadowAnimation To="4"/>-->
                    <ani:ScaleAnimation To="1.0" Duration="0:0:0.3"/>
                </ani:AnimationSet>
            </ani:Explicit.Animations>
            <interactivity:Interaction.Behaviors>
                <interactivity:EventTriggerBehavior EventName="PointerEntered">
                    <!--<behaviors:StartAnimationAction Animation="{x:Bind ShadowEnterAnimation}"/>-->
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleEnterAnimation}"/>
                    <!--<interactivity:ChangePropertyAction TargetObject="{Binding ElementName=HiddenContent}" PropertyName="Visibility" Value="Visible" />-->
                </interactivity:EventTriggerBehavior>
                <interactivity:EventTriggerBehavior EventName="PointerExited">
                    <!--<behaviors:StartAnimationAction Animation="{x:Bind ShadowExitAnimation}"/>-->
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleExitAnimation}"/>
                    <!--<interactivity:ChangePropertyAction TargetObject="{Binding ElementName=HiddenContent}" PropertyName="Visibility" Value="Collapsed" />-->
                </interactivity:EventTriggerBehavior>
            </interactivity:Interaction.Behaviors>
        </StackPanel>
    </DataTemplate>

    <DataTemplate x:Key="PlayListCardViewTemplate" x:DataType="jmodel:BaseItemDto">
        <Grid
              Width="170"
              Padding="0,0,0,12" 
              x:Name="PlayListCardConnectedElement"
              BorderBrush="{ThemeResource ButtonBorderBrush}"
              BorderThickness="{ThemeResource ButtonBorderThemeThickness}"
              CornerRadius="4"
              ui:VisualExtensions.NormalizedCenterPoint="0.5"
              Background="White"
              >
            <StackPanel Spacing="8" >
                <cont2:ImageEx2 
                    Source="{x:Bind helper2:BaseItemDtoHelper.GetPrimaryJellyfinImageWithBlur(ImageTags, ImageBlurHashes, Id)}" 
                    Style="{StaticResource LocalMusicImageStyle}" 
                    x:Phase="1"
                    />
                <TextBlock 
                    Margin="8,0" 
                    Text="{x:Bind Name}" 
                    LineStackingStrategy="BaselineToBaseline" 
                    FontSize="18" 
                    TextTrimming="CharacterEllipsis" 
                    TextWrapping="Wrap" 
                    MaxLines="2"
                    Height="48"
                    ToolTipService.ToolTip="{x:Bind Name}" 
                    FontFamily="{ThemeResource MiSansMedium}"
                    />
            </StackPanel>
            <Grid x:Name="HiddenContent" Visibility="Collapsed">
                <Button Style="{StaticResource TransparentButton}"
                        HorizontalAlignment="Center"
                        Padding="12"
                        Margin="0,-70,0,0"
                        CornerRadius="32"
                        Background="#99FFFFFF"
                        Tag="{x:Bind }"
                        Click="{x:Bind helper:PlayListHelper.PlayListPlay}">
                    <FontIcon FontFamily="{ThemeResource SegoeIcons}" Glyph="&#xE768;" FontSize="24"/>
                </Button>
                <StackPanel 
                    Margin="0,0,8,0"
                    HorizontalAlignment="Right" 
                    VerticalAlignment="Bottom" 
                    Orientation="Horizontal"
                    Spacing="8">
                    <Button Style="{StaticResource TransparentButton}" Foreground="Gray" >
                        <FontIcon FontFamily="{ThemeResource SegoeIcons}" Glyph="&#xE734;" FontSize="18"/>
                    </Button>
                    <Button Style="{StaticResource TransparentButton}" Foreground="Gray" >
                        <FontIcon FontFamily="{ThemeResource SegoeIcons}" Glyph="&#xE712;" FontSize="18"/>
                    </Button>
                </StackPanel>
            </Grid>

            <ani:Explicit.Animations>
                <ani:AnimationSet x:Name="ScaleEnterAnimation" >
                    <!--<ani:OffsetDropShadowAnimation To="12"/>-->
                    <ani:ScaleAnimation To="1.1" Duration="0:0:0.3"/>
                </ani:AnimationSet>

                <ani:AnimationSet x:Name="ScaleExitAnimation">
                    <!--<ani:OffsetDropShadowAnimation To="4"/>-->
                    <ani:ScaleAnimation To="1.0" Duration="0:0:0.3"/>
                </ani:AnimationSet>
            </ani:Explicit.Animations>
            <interactivity:Interaction.Behaviors>
                <interactivity:EventTriggerBehavior EventName="PointerEntered">
                    <!--<behaviors:StartAnimationAction Animation="{x:Bind ShadowEnterAnimation}"/>-->
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleEnterAnimation}"/>
                    <interactivity:ChangePropertyAction TargetObject="{Binding ElementName=HiddenContent}" PropertyName="Visibility" Value="Visible" />
                </interactivity:EventTriggerBehavior>
                <interactivity:EventTriggerBehavior EventName="PointerExited">
                    <!--<behaviors:StartAnimationAction Animation="{x:Bind ShadowExitAnimation}"/>-->
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleExitAnimation}"/>
                    <interactivity:ChangePropertyAction TargetObject="{Binding ElementName=HiddenContent}" PropertyName="Visibility" Value="Collapsed" />
                </interactivity:EventTriggerBehavior>
            </interactivity:Interaction.Behaviors>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="ArtistListCardViewTemplate" x:DataType="jmodel:BaseItemDto">
        <StackPanel 
            Width="170"
            Spacing="8" 
            Padding="0,0,0,12" 
            BorderBrush="{ThemeResource ButtonBorderBrush}"
            BorderThickness="{ThemeResource ButtonBorderThemeThickness}"
            CornerRadius="4"
            ui:VisualExtensions.NormalizedCenterPoint="0.5"
            Background="White"
            >
            <cont2:ImageEx2 
                Source="{x:Bind helper2:BaseItemDtoHelper.GetPrimaryJellyfinImageWithBlur(ImageTags, ImageBlurHashes, Id)}" 
                Style="{StaticResource LocalMusicImageStyle}"
                x:Phase="1"
            />
            <TextBlock 
                Margin="8,0" 
                Text="{x:Bind Name}" 
                LineStackingStrategy="BaselineToBaseline" 
                FontSize="16" 
                TextTrimming="CharacterEllipsis" 
                TextWrapping="Wrap" 
                MaxLines="2"
                Height="48"
                x:Phase="0"
                ToolTipService.ToolTip="{x:Bind Name}" 
                FontFamily="{ThemeResource MiSansMedium}"
                />
        </StackPanel>
    </DataTemplate>

    <DataTemplate x:Key="VideoCardViewTemplate" x:DataType="models:VideoItem">
        <StackPanel 
            Width="300"
            Spacing="8" 
            Padding="0,0,0,12"
            x:Name="VideoCardConnectedElement"
            BorderBrush="{ThemeResource ButtonBorderBrush}"
            BorderThickness="{ThemeResource ButtonBorderThemeThickness}"
            CornerRadius="4"
            ui:VisualExtensions.NormalizedCenterPoint="0.5"
            Background="White"
            >
            <cont2:ImageEx2 
                Source="{x:Bind Cover}" 
                Style="{StaticResource LocalVideoImageStyle}"
                />
            <TextBlock 
                Margin="8,0" 
                Text="{x:Bind Title}" 
                LineStackingStrategy="BaselineToBaseline" 
                FontSize="14" 
                MaxLines="2" 
                TextTrimming="CharacterEllipsis" 
                TextWrapping="Wrap" 
                Height="40" 
                ToolTipService.ToolTip="{x:Bind Title}" 
                FontFamily="{ThemeResource MiSansMedium}"
                />
            <TextBlock 
                Margin="8,0" 
                Text="{x:Bind GetDuration()}" 
                Foreground="Gray" 
                FontFamily="{ThemeResource MiSansRegular}"
                />
        </StackPanel>
    </DataTemplate>

    <DataTemplate x:Key="BiliVideoCardViewTemplate" x:DataType="bmodel:VideoInformation">
        <Grid Width="300"
                Padding="0,0,0,12"
                x:Name="BiliVideoCardConnectedElement"
                BorderBrush="{ThemeResource ButtonBorderBrush}"
                BorderThickness="{ThemeResource ButtonBorderThemeThickness}"
                CornerRadius="6"
                ui:VisualExtensions.NormalizedCenterPoint="0.5"
                Background="White">
            <StackPanel >
                <cont2:ImageEx2 
                    CornerRadius="6"
                    Source="{x:Bind Identifier.Cover.Uri}" 
                    Style="{StaticResource LocalVideoImageStyle}"
                    />
                <Grid Margin="0,-38,0,0" Height="38" Padding="8,0">
                    <Grid.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Offset="0" Color="Transparent"/>
                            <GradientStop Offset="1" Color="#CC000000"/>
                        </LinearGradientBrush>
                    </Grid.Background>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="4" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <FontIcon Grid.Row="1" FontFamily="{ThemeResource BiliIcons}" Glyph="&#xEA0F;" Foreground="White" FontSize="18" Margin="0,-1,4,0"/>
                    <TextBlock Grid.Column="1" Grid.Row="1" Text="{x:Bind ext:BiliUIExtensions.GetPlayCount((bmodel:VideoInformation))}" FontSize="13" Foreground="White" FontFamily="{ThemeResource MiSansRegular}" />
                    <FontIcon Grid.Column="2" Grid.Row="1" FontFamily="{ThemeResource BiliIcons}" Glyph="&#xEA05;" Foreground="White" FontSize="18" Margin="12,-1,4,0" />
                    <TextBlock Grid.Column="3" Grid.Row="1" Text="{x:Bind ext:BiliUIExtensions.GetDanmakuCount((bmodel:VideoInformation))}" FontSize="13" Foreground="White" FontFamily="{ThemeResource MiSansRegular}" />
                    <TextBlock Grid.Column="5" Grid.Row="1" Text="{x:Bind ext:BiliUIExtensions.GetDuration((bmodel:VideoInformation))}" FontSize="13" Foreground="White" FontFamily="{ThemeResource MiSansRegular}" />
                </Grid>
                <TextBlock 
                    Margin="8,8" 
                    Text="{x:Bind Identifier.Title}" 
                    LineStackingStrategy="BaselineToBaseline" 
                    FontSize="14" 
                    MaxLines="2" 
                    TextTrimming="CharacterEllipsis" 
                    TextWrapping="Wrap" 
                    Height="40" 
                    ToolTipService.ToolTip="{x:Bind Identifier.Title}" 
                    FontFamily="{ThemeResource MiSansMedium}"
                    />
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <StackPanel Orientation="Horizontal" Padding="8,0" HorizontalAlignment="Stretch">
                        <Border Visibility="{x:Bind ext:BiliUIExtensions.HasRcmdReasonContent((bmodel:VideoInformation))}" CornerRadius="2" Background="#fef1e2" Padding="6,0" Margin="0,0,8,0">
                            <TextBlock Text="{x:Bind ext:BiliUIExtensions.GetRcmdReason((bmodel:VideoInformation))}" Foreground="#ff7f23" FontFamily="{ThemeResource MiSansRegular}" VerticalAlignment="Center"/>
                        </Border>
                        <FontIcon Visibility="{x:Bind ext:BiliUIExtensions.NoRcmdReasonContent((bmodel:VideoInformation))}" FontFamily="{ThemeResource BiliIcons}" Foreground="Gray" FontSize="13" Margin="0,0,6,-2" Glyph="&#xEA1D;" />
                        <TextBlock Text="{x:Bind Publisher.User.Name}" Foreground="Gray" FontFamily="{ThemeResource MiSansRegular}" />
                        <TextBlock Visibility="{x:Bind ext:BiliUIExtensions.NoRcmdReasonContent((bmodel:VideoInformation))}" Margin="12,0" Text="{x:Bind ext:BiliUIExtensions.GetUpDateTime((bmodel:VideoInformation))}" Foreground="Gray" FontFamily="{ThemeResource MiSansRegular}" />
                    </StackPanel>
                    <Button Grid.Column="1" Style="{StaticResource TransparentButton}" Margin="0,0,8,0" Foreground="Gray">
                        <FontIcon HorizontalAlignment="Right" FontFamily="{ThemeResource SegoeIcons}" Glyph="&#xE10C;" />
                        <Button.Flyout>
                            <Flyout>
                                <Grid Width="300">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="1*" />
                                        <ColumnDefinition Width="1*" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Button Margin="0,0,0,16" Grid.ColumnSpan="2" HorizontalAlignment="Stretch">添加至稍后再看</Button>
                                    <TextBlock Grid.Row="1" Grid.ColumnSpan="2" Text="反馈" FontFamily="{ThemeResource MiSansRegular}" />
                                    <TextBlock Grid.Row="1" Grid.ColumnSpan="2" Margin="28,0,0,0" Text="（选择后将优化首页此类内容）" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansRegular}" Foreground="Gray" FontSize="13"/>
                                    <Button Grid.Row="2" Margin="0,16,4,8" HorizontalAlignment="Stretch">恐怖血腥</Button>
                                    <Button Grid.Row="2" Margin="4,16,0,8" Grid.Column="1" HorizontalAlignment="Stretch">色情低俗</Button>
                                    <Button Grid.Row="3" Margin="0,0,4,16" HorizontalAlignment="Stretch">封面恶心</Button>
                                    <Button Grid.Row="3" Margin="4,0,0,16" Grid.Column="1" HorizontalAlignment="Stretch">标题党/封面党</Button>
                                    <TextBlock Grid.Row="4" Grid.ColumnSpan="2" Text="我不想看" FontFamily="{ThemeResource MiSansRegular}" />
                                    <TextBlock Grid.Row="4" Grid.ColumnSpan="2" Margin="56,0,0,0" Text="（选择后将减少相似内容推荐）" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansRegular}" Foreground="Gray" FontSize="13"/>
                                </Grid>
                            </Flyout>
                        </Button.Flyout>
                    </Button>
                </Grid>
            </StackPanel>
            <Grid x:Name="HiddenContent" Visibility="Collapsed">
                <Button Style="{StaticResource TransparentButton}"
                            HorizontalAlignment="Center"
                            Padding="12"
                            Margin="0,-70,0,0"
                            CornerRadius="32"
                            Background="#99FFFFFF"
                            Tag="{x:Bind }"
                            Click="{x:Bind helper:BangumiHelper.BiliPlay}"
                            >
                    <FontIcon FontFamily="{ThemeResource SegoeIcons}" Glyph="&#xE768;" FontSize="24"/>
                </Button>
                <!--<StackPanel 
                        Margin="0,0,8,0"
                        HorizontalAlignment="Right" 
                        VerticalAlignment="Bottom" 
                        Orientation="Horizontal"
                        Spacing="8">
                    <Button Style="{StaticResource TransparentButton}" Foreground="Gray" >
                        <FontIcon FontFamily="{ThemeResource SegoeIcons}" Glyph="&#xE734;" FontSize="18"/>
                    </Button>
                    <Button Style="{StaticResource TransparentButton}" Foreground="Gray" >
                        <FontIcon FontFamily="{ThemeResource SegoeIcons}" Glyph="&#xE712;" FontSize="18"/>
                    </Button>
                </StackPanel>-->
            </Grid>

            <ani:Explicit.Animations>
                <ani:AnimationSet x:Name="ScaleEnterAnimation" >
                    <!--<ani:OffsetDropShadowAnimation To="12"/>-->
                    <ani:ScaleAnimation To="1.1" Duration="0:0:0.3"/>
                </ani:AnimationSet>

                <ani:AnimationSet x:Name="ScaleExitAnimation">
                    <!--<ani:OffsetDropShadowAnimation To="4"/>-->
                    <ani:ScaleAnimation To="1.0" Duration="0:0:0.3"/>
                </ani:AnimationSet>
            </ani:Explicit.Animations>
            <interactivity:Interaction.Behaviors>
                <interactivity:EventTriggerBehavior EventName="PointerEntered">
                    <!--<behaviors:StartAnimationAction Animation="{x:Bind ShadowEnterAnimation}"/>-->
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleEnterAnimation}"/>
                    <interactivity:ChangePropertyAction TargetObject="{Binding ElementName=HiddenContent}" PropertyName="Visibility" Value="Visible" />
                </interactivity:EventTriggerBehavior>
                <interactivity:EventTriggerBehavior EventName="PointerExited">
                    <!--<behaviors:StartAnimationAction Animation="{x:Bind ShadowExitAnimation}"/>-->
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleExitAnimation}"/>
                    <interactivity:ChangePropertyAction TargetObject="{Binding ElementName=HiddenContent}" PropertyName="Visibility" Value="Collapsed" />
                </interactivity:EventTriggerBehavior>
            </interactivity:Interaction.Behaviors>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="BiliVideoCardViewTemplate2" x:DataType="bmodel:VideoInformation">
        <StackPanel 
            Width="240"
            x:Name="BiliVideoCardConnectedElement"
            BorderBrush="{ThemeResource ButtonBorderBrush}"
            BorderThickness="{ThemeResource ButtonBorderThemeThickness}"
            CornerRadius="4"
            ui:VisualExtensions.NormalizedCenterPoint="0.5"
            Background="White"
            >
            <cont2:ImageEx2 
                CornerRadius="4"
                Source="{x:Bind Identifier.Cover.Uri}" 
                Style="{StaticResource LocalVideoImageStyle}"
                Width="240" Height="120" 
                DecodePixelWidth="240" DecodePixelHeight="240"
                />
            <Grid Margin="0,-38,0,0" Height="38" Padding="8,0">
                <Grid.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Offset="0" Color="Transparent"/>
                        <GradientStop Offset="1" Color="#CC000000"/>
                    </LinearGradientBrush>
                </Grid.Background>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="4" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <FontIcon Grid.Row="1" FontFamily="{ThemeResource BiliIcons}" Glyph="&#xEA0F;" Foreground="White" FontSize="18" Margin="0,-1,4,0"/>
                <TextBlock Grid.Column="1" Grid.Row="1" Text="{x:Bind ext:BiliUIExtensions.GetPlayCount((bmodel:VideoInformation))}" FontSize="13" Foreground="White" FontFamily="{ThemeResource MiSansRegular}" />
                <FontIcon Grid.Column="2" Grid.Row="1" FontFamily="{ThemeResource BiliIcons}" Glyph="&#xEA05;" Foreground="White" FontSize="18" Margin="12,-1,4,0" />
                <TextBlock Grid.Column="3" Grid.Row="1" Text="{x:Bind ext:BiliUIExtensions.GetDanmakuCount((bmodel:VideoInformation))}" FontSize="13" Foreground="White" FontFamily="{ThemeResource MiSansRegular}" />
                <TextBlock Grid.Column="5" Grid.Row="1" Text="{x:Bind ext:BiliUIExtensions.GetDuration((bmodel:VideoInformation))}" FontSize="13" Foreground="White" FontFamily="{ThemeResource MiSansRegular}" />
            </Grid>
            <TextBlock 
                Margin="8,8" 
                Text="{x:Bind Identifier.Title}" 
                LineStackingStrategy="BaselineToBaseline" 
                FontSize="14" 
                MaxLines="2" 
                TextTrimming="CharacterEllipsis" 
                TextWrapping="Wrap" 
                Height="40" 
                ToolTipService.ToolTip="{x:Bind Identifier.Title}" 
                FontFamily="{ThemeResource MiSansMedium}"
                />
            <StackPanel Orientation="Horizontal" Padding="8,0" >
                <FontIcon Grid.Column="2" FontFamily="{ThemeResource BiliIcons}" Foreground="Gray" FontSize="13" Margin="0,0,6,-2" Glyph="&#xEA1D;" />
                <TextBlock Text="{x:Bind Publisher.User.Name}" Foreground="Gray" FontFamily="{ThemeResource MiSansRegular}" />
                <TextBlock Margin="12,0" Text="{x:Bind ext:BiliUIExtensions.GetUpDateTime((bmodel:VideoInformation))}" Foreground="Gray" FontFamily="{ThemeResource MiSansRegular}" />
            </StackPanel>

            <ani:Explicit.Animations>
                <ani:AnimationSet x:Name="ScaleEnterAnimation" >
                    <ani:ScaleAnimation To="1.05" Duration="0:0:0.3"/>
                </ani:AnimationSet>

                <ani:AnimationSet x:Name="ScaleExitAnimation">
                    <ani:ScaleAnimation To="1.0" Duration="0:0:0.3"/>
                </ani:AnimationSet>
            </ani:Explicit.Animations>
            <interactivity:Interaction.Behaviors>
                <interactivity:EventTriggerBehavior EventName="PointerEntered">
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleEnterAnimation}"/>
                </interactivity:EventTriggerBehavior>
                <interactivity:EventTriggerBehavior EventName="PointerExited">
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleExitAnimation}"/>
                </interactivity:EventTriggerBehavior>
            </interactivity:Interaction.Behaviors>
        </StackPanel>
    </DataTemplate>

    <DataTemplate x:Key="BiliVideoCardViewTemplate3" x:DataType="bili3:UserVideoInfoItem">
        <StackPanel 
            Width="300"
            x:Name="BiliVideoCardConnectedElement"
            BorderBrush="{ThemeResource ButtonBorderBrush}"
            BorderThickness="{ThemeResource ButtonBorderThemeThickness}"
            CornerRadius="4"
            ui:VisualExtensions.NormalizedCenterPoint="0.5"
            Background="White"
            >
            <cont2:ImageEx2 
                CornerRadius="4"
                Source="{x:Bind Pic}" 
                Style="{StaticResource LocalVideoImageStyle}"
                />
            <Grid Margin="0,-38,0,0" Height="38" Padding="8,0">
                <Grid.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Offset="0" Color="Transparent"/>
                        <GradientStop Offset="1" Color="#CC000000"/>
                    </LinearGradientBrush>
                </Grid.Background>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="4" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <FontIcon Grid.Row="1" FontFamily="{ThemeResource BiliIcons}" Glyph="&#xEA0F;" Foreground="White" FontSize="18" Margin="0,-1,4,0"/>
                <TextBlock Grid.Column="1" Grid.Row="1" Text="{x:Bind GetViews()}" FontSize="13" Foreground="White" FontFamily="{ThemeResource MiSansRegular}" />
                <FontIcon Grid.Column="2" Grid.Row="1" FontFamily="{ThemeResource BiliIcons}" Glyph="&#xEA05;" Foreground="White" FontSize="18" Margin="12,-1,4,0" />
                <TextBlock Grid.Column="3" Grid.Row="1" Text="{x:Bind GetDanMaku()}" FontSize="13" Foreground="White" FontFamily="{ThemeResource MiSansRegular}" />
                <TextBlock Grid.Column="5" Grid.Row="1" Text="{x:Bind Length}" FontSize="13" Foreground="White" FontFamily="{ThemeResource MiSansRegular}" />
            </Grid>
            <TextBlock 
                Margin="8,8" 
                Text="{x:Bind Title}" 
                LineStackingStrategy="BaselineToBaseline" 
                FontSize="14" 
                MaxLines="2" 
                TextTrimming="CharacterEllipsis" 
                TextWrapping="Wrap" 
                Height="40" 
                ToolTipService.ToolTip="{x:Bind Title}" 
                FontFamily="{ThemeResource MiSansMedium}"
                />
            <StackPanel Orientation="Horizontal" Padding="8,0" Margin="0,0,0,8">
                <TextBlock Text="{x:Bind GetUpDateTime()}" Foreground="Gray" FontFamily="{ThemeResource MiSansRegular}" />
            </StackPanel>

            <ani:Explicit.Animations>
                <ani:AnimationSet x:Name="ScaleEnterAnimation" >
                    <ani:ScaleAnimation To="1.05" Duration="0:0:0.3"/>
                </ani:AnimationSet>

                <ani:AnimationSet x:Name="ScaleExitAnimation">
                    <ani:ScaleAnimation To="1.0" Duration="0:0:0.3"/>
                </ani:AnimationSet>
            </ani:Explicit.Animations>
            <interactivity:Interaction.Behaviors>
                <interactivity:EventTriggerBehavior EventName="PointerEntered">
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleEnterAnimation}"/>
                </interactivity:EventTriggerBehavior>
                <interactivity:EventTriggerBehavior EventName="PointerExited">
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleExitAnimation}"/>
                </interactivity:EventTriggerBehavior>
            </interactivity:Interaction.Behaviors>
        </StackPanel>
    </DataTemplate>

    <DataTemplate x:Key="BiliVideoCardViewTemplate4" x:DataType="bili4:SearchResultData">
        <StackPanel 
            Width="300"
            Padding="0,0,0,12"
            x:Name="BiliVideoCardConnectedElement"
            BorderBrush="{ThemeResource ButtonBorderBrush}"
            BorderThickness="{ThemeResource ButtonBorderThemeThickness}"
            CornerRadius="4"
            ui:VisualExtensions.NormalizedCenterPoint="0.5"
            Background="White"
            >
            <cont2:ImageEx2 
                CornerRadius="4"
                Source="{x:Bind GetCover()}" 
                Style="{StaticResource LocalVideoImageStyle}"
                />
            <Grid Margin="0,-38,0,0" Height="38" Padding="8,0">
                <Grid.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Offset="0" Color="Transparent"/>
                        <GradientStop Offset="1" Color="#CC000000"/>
                    </LinearGradientBrush>
                </Grid.Background>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="4" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <FontIcon Grid.Row="1" FontFamily="{ThemeResource BiliIcons}" Glyph="&#xEA0F;" Foreground="White" FontSize="18" Margin="0,-1,4,0"/>
                <TextBlock Grid.Column="1" Grid.Row="1" Text="{x:Bind Play}" FontSize="13" Foreground="White" FontFamily="{ThemeResource MiSansRegular}" />
                <FontIcon Grid.Column="2" Grid.Row="1" FontFamily="{ThemeResource BiliIcons}" Glyph="&#xEA05;" Foreground="White" FontSize="18" Margin="12,-1,4,0" />
                <TextBlock Grid.Column="3" Grid.Row="1" Text="{x:Bind VideoReview}" FontSize="13" Foreground="White" FontFamily="{ThemeResource MiSansRegular}" />
                <TextBlock Grid.Column="5" Grid.Row="1" Text="{x:Bind Duration}" FontSize="13" Foreground="White" FontFamily="{ThemeResource MiSansRegular}" />
            </Grid>
            <TextBlock 
                Margin="8,8" 
                Text="{x:Bind GetTitle()}" 
                LineStackingStrategy="BaselineToBaseline" 
                FontSize="14" 
                MaxLines="2" 
                TextTrimming="CharacterEllipsis" 
                TextWrapping="Wrap" 
                Height="40" 
                ToolTipService.ToolTip="{x:Bind GetTitle()}" 
                FontFamily="{ThemeResource MiSansMedium}"
                />
            <StackPanel Orientation="Horizontal" Padding="8,0">
                <FontIcon Grid.Column="2" FontFamily="{ThemeResource BiliIcons}" Foreground="Gray" FontSize="13" Margin="0,0,6,-2" Glyph="&#xEA1D;" />
                <TextBlock Text="{x:Bind Author}" Foreground="Gray" FontFamily="{ThemeResource MiSansRegular}" />
                <TextBlock Margin="12,0" Text="{x:Bind GetPubDate()}" Foreground="Gray" FontFamily="{ThemeResource MiSansRegular}" />
            </StackPanel>
        </StackPanel>
    </DataTemplate>

    <DataTemplate x:Key="SeriesCardViewTemplate" x:DataType="jmodel:BaseItemDto">
        <Grid Width="170"
              Padding="0,0,0,12" 
              x:Name="SeriesCardConnectedElement"
              BorderBrush="{ThemeResource ButtonBorderBrush}"
              BorderThickness="{ThemeResource ButtonBorderThemeThickness}"
              CornerRadius="4"
              ui:VisualExtensions.NormalizedCenterPoint="0.5"
              Background="White"
              >
            <StackPanel Spacing="8" >
                <cont2:ImageEx2 
                    Source="{x:Bind helper2:BaseItemDtoHelper.GetPrimaryJellyfinImageWithBlur(ImageTags, ImageBlurHashes, Id)}" 
                    Style="{StaticResource SeriesImageStyle}" 
                    x:Phase="2"
                />
                <TextBlock 
                    Margin="8,0" 
                    Text="{x:Bind Name}" 
                    LineStackingStrategy="BaselineToBaseline" 
                    FontSize="14" 
                    MaxLines="2" 
                    TextTrimming="CharacterEllipsis" 
                    TextWrapping="Wrap" 
                    Height="40" 
                    x:Phase="0"
                    ToolTipService.ToolTip="{x:Bind Name}" 
                    FontFamily="{ThemeResource MiSansMedium}"
                />
                <TextBlock 
                    Margin="8,0" 
                    Text="{x:Bind ProductionYear}" 
                    LineStackingStrategy="BaselineToBaseline" 
                    FontSize="14" 
                    MaxLines="2" 
                    TextTrimming="CharacterEllipsis" 
                    TextWrapping="Wrap" 
                    ToolTipService.ToolTip="{x:Bind ProductionYear}" 
                    FontFamily="{ThemeResource MiSansNormal}"
                    x:Phase="1"
                />

            </StackPanel>

            <Grid x:Name="HiddenContent" Visibility="Collapsed">
                <Button Style="{StaticResource TransparentButton}"
                        HorizontalAlignment="Center"
                        Padding="12"
                        Margin="0,-70,0,0"
                        CornerRadius="32"
                        Background="#99FFFFFF"
                        Tag="{x:Bind }"
                        Click="{x:Bind helper:BangumiHelper.SeriesPlay}">
                    <FontIcon FontFamily="{ThemeResource SegoeIcons}" Glyph="&#xE768;" FontSize="24"/>
                </Button>
                <StackPanel 
                    Margin="0,0,8,0"
                    Padding="8,0,0,0"
                    HorizontalAlignment="Right" 
                    VerticalAlignment="Bottom" 
                    Orientation="Horizontal"
                    Spacing="8"
                    Background="White"
                >
                    <Button Style="{StaticResource TransparentButton}" Foreground="Gray" >
                        <FontIcon FontFamily="{ThemeResource SegoeIcons}" Glyph="&#xE734;" FontSize="18"/>
                    </Button>
                    <Button Style="{StaticResource TransparentButton}" Foreground="Gray" >
                        <FontIcon FontFamily="{ThemeResource SegoeIcons}" Glyph="&#xE712;" FontSize="18"/>
                    </Button>
                </StackPanel>
            </Grid>
            <ani:Explicit.Animations>
                <ani:AnimationSet x:Name="ScaleEnterAnimation" >
                    <ani:ScaleAnimation To="1.05" Duration="0:0:0.3"/>
                </ani:AnimationSet>

                <ani:AnimationSet x:Name="ScaleExitAnimation">
                    <ani:ScaleAnimation To="1.0" Duration="0:0:0.3"/>
                </ani:AnimationSet>
            </ani:Explicit.Animations>
            <interactivity:Interaction.Behaviors>
                <interactivity:EventTriggerBehavior EventName="PointerEntered">
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleEnterAnimation}"/>
                    <interactivity:ChangePropertyAction TargetObject="{Binding ElementName=HiddenContent}" PropertyName="Visibility" Value="Visible" />
                </interactivity:EventTriggerBehavior>
                <interactivity:EventTriggerBehavior EventName="PointerExited">
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleExitAnimation}"/>
                    <interactivity:ChangePropertyAction TargetObject="{Binding ElementName=HiddenContent}" PropertyName="Visibility" Value="Collapsed" />
                </interactivity:EventTriggerBehavior>
            </interactivity:Interaction.Behaviors>
        </Grid>

    </DataTemplate>

    <DataTemplate x:Key="CloudPlayListCardViewTemplate" x:DataType="modelsC:CloudPlayListItem">
        <StackPanel
            Width="160"
            Spacing="8" 
            x:Name="CloudPlayListCardConnectedElement"
            BorderBrush="{ThemeResource ButtonBorderBrush}"
            BorderThickness="0.5"
            CornerRadius="6"
            ui:VisualExtensions.NormalizedCenterPoint="0.5"
            Background="White"
            >
            <Grid Width="160" Height="160">
                <cont2:ImageEx2 
                Source="{x:Bind Cover}" 
                Style="{StaticResource LocalMusicImageStyle}" 
                Width="160" Height="160"
                x:Phase="2" 
                />
                <StackPanel Orientation="Horizontal" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="8" Padding="6,0" Spacing="2" Background="#40000000" CornerRadius="8">
                    <FontIcon Foreground="White" FontFamily="{ThemeResource SegoeIcons}" Glyph="&#xE102;" FontSize="10" FontWeight="Medium"/>
                    <TextBlock Foreground="White" Text="{x:Bind GetPlayCount()}" FontSize="12" FontFamily="{StaticResource MiSansRegular}" />
                </StackPanel>
            </Grid>
            <TextBlock 
                Margin="8,0" 
                Text="{x:Bind Title}" 
                LineStackingStrategy="BaselineToBaseline" 
                FontSize="14" 
                MaxLines="2" 
                TextTrimming="CharacterEllipsis" 
                TextWrapping="Wrap" 
                Height="40" 
                ToolTipService.ToolTip="{x:Bind Title}" 
                x:Phase="0" 
                FontFamily="{ThemeResource MiSansMedium}"
                />
        </StackPanel>
    </DataTemplate>

    <DataTemplate x:Key="CloudArtistCardViewTemplate" x:DataType="modelsC:CloudArtistItem">
        <StackPanel
            Width="80"
            Spacing="8" 
            Padding="0,0,0,8"
            x:Name="CloudArtistCardConnectedElement"
            ui:VisualExtensions.NormalizedCenterPoint="0.5"
            Background="White"
            >
            <cont2:ImageEx2 
                Source="{x:Bind Avatar}" 
                Style="{StaticResource LocalMusicImageStyle}" 
                ui:VisualExtensions.NormalizedCenterPoint="0.5"
                Width="70" Height="70"
                CornerRadius="4"
                x:Phase="2" 
                />
            <TextBlock 
                Margin="8,0" 
                Text="{x:Bind Name}" 
                HorizontalAlignment="Center"
                LineStackingStrategy="BaselineToBaseline" 
                FontSize="12" 
                MaxLines="2" 
                TextTrimming="CharacterEllipsis" 
                TextWrapping="Wrap" 
                Height="32" 
                ToolTipService.ToolTip="{x:Bind Name}" 
                x:Phase="0" 
                FontFamily="{ThemeResource MiSansMedium}"
                />
        </StackPanel>
    </DataTemplate>

    <conv:IndexConverter x:Key="IndexConverter" />
    <conv:GridIndexConverter x:Key="GridIndexConverter" />

    <DataTemplate x:Key="CloudMusicCardViewTemplate" x:DataType="models:MusicItem">
        <Grid Padding="8" Background="White" CornerRadius="4" ui:VisualExtensions.NormalizedCenterPoint="0.5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="24" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="1.4*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBlock HorizontalAlignment="Center" Text="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource IndexConverter}}" FontSize="12" FontFamily="{ThemeResource MiSansBold}" VerticalAlignment="Center"/>
            <cont2:ImageEx2 Margin="8,0,0,0" Grid.Column="1" Source="{x:Bind Cover}" Style="{StaticResource LocalMusicImageStyle}" Height="40" Width="40" CornerRadius="4" EnableLazyLoading="False"/>
            <FontIcon Grid.Column="2" Margin="6,0" FontFamily="{ThemeResource SegoeIcons}" Glyph="&#xE00F;" Foreground="#BEC2CE" FontSize="16" FontWeight="Bold"/>
            <TextBlock Grid.Column="3" FontSize="14" TextTrimming="CharacterEllipsis" VerticalAlignment="Center" Text="{x:Bind Title}" FontFamily="{ThemeResource MiSansMedium}" ToolTipService.ToolTip="{x:Bind Title}"/>
            <TextBlock Grid.Column="4" Text="{x:Bind GetArtists()}" FontSize="12" TextTrimming="CharacterEllipsis" FontFamily="{ThemeResource MiSansRegular}" Foreground="Gray" VerticalAlignment="Center" ToolTipService.ToolTip="{x:Bind Album}"/>
            <TextBlock Grid.Column="5" Text="{x:Bind Duration.ToString('mm\\\\:ss')}" FontSize="12" FontFamily="{ThemeResource MiSansRegular}" Foreground="Gray" VerticalAlignment="Center"/>
            <ToggleButton x:Name="B" Grid.Column="6" Style="{StaticResource LikeButton}" IsChecked="{x:Bind IsLike}" Margin="16,0,8,0" VerticalAlignment="Center" Click="{x:Bind helper:LikeHelper.Like}" >
                <FontIcon FontFamily="{ThemeResource SegoeIcons}" Glyph="{Binding ElementName=B, Path=IsChecked, Converter={StaticResource LikeGlyphConverter}}" FontWeight="Bold" FontSize="16" VerticalAlignment="Center"/>
            </ToggleButton>

            <ani:Explicit.Animations>
                <ani:AnimationSet x:Name="ScaleEnterAnimation" >
                    <ani:ScaleAnimation To="1.05" Duration="0:0:0.3"/>
                </ani:AnimationSet>

                <ani:AnimationSet x:Name="ScaleExitAnimation">
                    <ani:ScaleAnimation To="1.0" Duration="0:0:0.3"/>
                </ani:AnimationSet>
            </ani:Explicit.Animations>
            <interactivity:Interaction.Behaviors>
                <interactivity:EventTriggerBehavior EventName="PointerEntered">
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleEnterAnimation}"/>
                </interactivity:EventTriggerBehavior>
                <interactivity:EventTriggerBehavior EventName="PointerExited">
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleExitAnimation}"/>
                </interactivity:EventTriggerBehavior>
            </interactivity:Interaction.Behaviors>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="CloudMusicCardViewInArtistTemplate" x:DataType="models:MusicItem">
        <Grid Padding="8" Background="White" CornerRadius="4" ui:VisualExtensions.NormalizedCenterPoint="0.5" RightTapped="{x:Bind helper:ListHelper.RightTapMusicInListClick}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="24" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="1.4*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="1.4*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBlock HorizontalAlignment="Center" Text="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource IndexConverter}}" FontSize="12" FontFamily="{ThemeResource MiSansBold}" VerticalAlignment="Center"/>
            <!--<cont2:ImageEx2 Margin="8,0,0,0" Grid.Column="1" Source="{x:Bind Cover}" Style="{StaticResource LocalMusicImageStyle}" Height="40" Width="40" CornerRadius="4" EnableLazyLoading="False"/>-->
            <FontIcon Grid.Column="2" Margin="6,0" FontFamily="{ThemeResource SegoeIcons}" Glyph="&#xE00F;" Foreground="#BEC2CE" FontSize="16" FontWeight="Bold"/>
            <TextBlock Grid.Column="3" FontSize="14" TextTrimming="CharacterEllipsis" VerticalAlignment="Center" Text="{x:Bind Title}" FontFamily="{ThemeResource MiSansMedium}" ToolTipService.ToolTip="{x:Bind Title}"/>
            <TextBlock Grid.Column="4" Text="{x:Bind GetArtists()}" FontSize="12" TextTrimming="CharacterEllipsis" FontFamily="{ThemeResource MiSansRegular}" Foreground="Gray" VerticalAlignment="Center" ToolTipService.ToolTip="{x:Bind GetArtists()}"/>
            <TextBlock Grid.Column="5" Text="{x:Bind Album}" FontSize="12" TextTrimming="CharacterEllipsis" FontFamily="{ThemeResource MiSansRegular}" Foreground="Gray" VerticalAlignment="Center" ToolTipService.ToolTip="{x:Bind Album}"/>
            <TextBlock Grid.Column="6" Margin="32,0,0,0" Text="{x:Bind Duration.ToString('mm\\\\:ss')}" FontSize="12" FontFamily="{ThemeResource MiSansRegular}" Foreground="Gray" VerticalAlignment="Center"/>
            <Button Grid.Column="7" Style="{StaticResource TransparentButton}" Margin="16,0,0,0" CornerRadius="4" Padding="4" Tag="{x:Bind }" Click="{x:Bind helper:ListHelper.RightTapMusicInListClick}">
                <SymbolIcon Symbol="More" />
            </Button>

            <ani:Explicit.Animations>
                <ani:AnimationSet x:Name="ScaleEnterAnimation" >
                    <ani:ScaleAnimation To="1.05" Duration="0:0:0.3"/>
                </ani:AnimationSet>

                <ani:AnimationSet x:Name="ScaleExitAnimation">
                    <ani:ScaleAnimation To="1.0" Duration="0:0:0.3"/>
                </ani:AnimationSet>
            </ani:Explicit.Animations>
            <interactivity:Interaction.Behaviors>
                <interactivity:EventTriggerBehavior EventName="PointerEntered">
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleEnterAnimation}"/>
                </interactivity:EventTriggerBehavior>
                <interactivity:EventTriggerBehavior EventName="PointerExited">
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleExitAnimation}"/>
                </interactivity:EventTriggerBehavior>
            </interactivity:Interaction.Behaviors>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="CloudSimiSongCardViewTemplate" x:DataType="modelsC:CloudMusicItem">
        <StackPanel
            Width="40"
            Padding="0,0,0,0"
            x:Name="CloudSimiSongCardConnectedElement"
            ui:VisualExtensions.NormalizedCenterPoint="0.5"
            >
            <cont2:ImageEx2 
                Source="{x:Bind Cover}" 
                Style="{StaticResource LocalMusicImageStyle}" 
                ui:VisualExtensions.NormalizedCenterPoint="0.5"
                Width="40" Height="40"
                CornerRadius="4"
                ToolTipService.ToolTip="{x:Bind Title}" 
                />
        </StackPanel>
    </DataTemplate>

    <DataTemplate x:Key="JellyfinSimiSongCardViewTemplate" x:DataType="jmodel:BaseItemDto">
        <StackPanel
            Width="60"
            Padding="0,0,0,0"
            x:Name="CloudSimiSongCardConnectedElement"
            ui:VisualExtensions.NormalizedCenterPoint="0.5"
            >
            <cont2:ImageEx2 
                Source="{x:Bind helper2:BaseItemDtoHelper.GetPrimaryJellyfinImageWithBlur(ImageTags, ImageBlurHashes, Id)}" 
                Style="{StaticResource LocalMusicImageStyle}" 
                ui:VisualExtensions.NormalizedCenterPoint="0.5"
                Width="60" Height="60"
                CornerRadius="6"
                ToolTipService.ToolTip="{x:Bind Name}" 
                />

            <ani:Explicit.Animations>
                <ani:AnimationSet x:Name="ScaleEnterAnimation" >
                    <ani:ScaleAnimation To="1.1" Duration="0:0:0.3"/>
                </ani:AnimationSet>

                <ani:AnimationSet x:Name="ScaleExitAnimation">
                    <ani:ScaleAnimation To="1.0" Duration="0:0:0.3"/>
                </ani:AnimationSet>
            </ani:Explicit.Animations>
            <interactivity:Interaction.Behaviors>
                <interactivity:EventTriggerBehavior EventName="PointerEntered">
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleEnterAnimation}"/>
                </interactivity:EventTriggerBehavior>
                <interactivity:EventTriggerBehavior EventName="PointerExited">
                    <behaviors:StartAnimationAction Animation="{Binding ElementName=ScaleExitAnimation}"/>
                </interactivity:EventTriggerBehavior>
            </interactivity:Interaction.Behaviors>
        </StackPanel>
    </DataTemplate>

    <DataTemplate x:Key="CloudSearchHotTemplate" x:DataType="modelsC:CloudSearchHotItem">
        <Grid
            Width="172"
            Background="White"
            Padding="8,8,8,8"
            x:Name="CloudSearchHotTemplateConnectedElement"
            ui:VisualExtensions.NormalizedCenterPoint="0.5"
            CornerRadius="4"
            >
            <TextBlock Text="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource GridIndexConverter}}" FontFamily="{ThemeResource MiSansRegular}" />
            <TextBlock Margin="20,0,0,0" Text="{x:Bind SearchWord}" FontFamily="{ThemeResource MiSansRegular}" TextTrimming="CharacterEllipsis"/>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="BiliHistoryCardViewTemplate" x:DataType="bmodel:VideoInformation">
        <StackPanel 
            Width="300"
            Padding="0,0,0,12"
            x:Name="BiliHistoryCardConnectedElement"
            BorderBrush="{ThemeResource ButtonBorderBrush}"
            BorderThickness="{ThemeResource ButtonBorderThemeThickness}"
            CornerRadius="4"
            ui:VisualExtensions.NormalizedCenterPoint="0.5"
            Background="White"
            >
            <cont2:ImageEx2 
                CornerRadius="4"
                Source="{x:Bind Identifier.Cover.Uri}" 
                Style="{StaticResource LocalVideoImageStyle}"
                />
            <Grid Margin="0,-24,0,0" Height="24" Padding="8,0">
                <Grid.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Offset="0" Color="Transparent"/>
                        <GradientStop Offset="0.2" Color="#10000000"/>
                        <GradientStop Offset="0.8" Color="#80000000"/>
                    </LinearGradientBrush>
                </Grid.Background>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <FontIcon FontFamily="{ThemeResource SegoeIcons}" Foreground="White" FontSize="13" Margin="0,-6,4,0" Glyph="&#xE102;" />
                <TextBlock Grid.Column="1" Grid.Row="1" Text="{x:Bind ext:BiliUIExtensions.GetPlayCount((bmodel:VideoInformation))}" FontSize="13" Foreground="White" FontFamily="{ThemeResource MiSansRegular}" />
                <FontIcon Grid.Column="2" FontFamily="{ThemeResource SegoeIcons}" Foreground="White" FontSize="13" Margin="12,-6,4,0" Glyph="&#xE134;" />
                <TextBlock Grid.Column="3" Grid.Row="1" Text="{x:Bind ext:BiliUIExtensions.GetCommentCount((bmodel:VideoInformation))}" FontSize="13" Foreground="White" FontFamily="{ThemeResource MiSansRegular}" />
                <TextBlock Grid.Column="5" Text="{x:Bind ext:BiliUIExtensions.GetDuration((bmodel:VideoInformation))}" FontSize="13" Foreground="White" FontFamily="{ThemeResource MiSansRegular}" />
            </Grid>
            <TextBlock 
                Margin="8,8" 
                Text="{x:Bind Identifier.Title}" 
                LineStackingStrategy="BaselineToBaseline" 
                FontSize="14" 
                MaxLines="2" 
                TextTrimming="CharacterEllipsis" 
                TextWrapping="Wrap" 
                Height="40" 
                ToolTipService.ToolTip="{x:Bind Identifier.Title}" 
                FontFamily="{ThemeResource MiSansMedium}"
                />
            <StackPanel Orientation="Horizontal" Padding="8,0">
                <FontIcon Grid.Column="2" FontFamily="{ThemeResource BiliIcons}" Foreground="Gray" FontSize="13" Margin="0,0,6,-2" Glyph="&#xEA1D;" />
                <TextBlock Text="{x:Bind Publisher.User.Name}" Foreground="Gray" FontFamily="{ThemeResource MiSansRegular}" />
                <!--<TextBlock Margin="12,0" Text="{x:Bind  }" Foreground="Gray" FontFamily="{ThemeResource MiSansRegular}" />-->
            </StackPanel>
        </StackPanel>
    </DataTemplate>
</ResourceDictionary>
