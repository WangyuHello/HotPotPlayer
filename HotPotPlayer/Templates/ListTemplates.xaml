<ResourceDictionary
    x:Class="HotPotPlayer.Templates.ListTemplates"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:models="using:HotPotPlayer.Models"
    xmlns:modelsC="using:HotPotPlayer.Models.CloudMusic"
    xmlns:jmodel="using:Jellyfin.Sdk.Generated.Models"
    xmlns:bmodel="using:Richasy.BiliKernel.Models"
    xmlns:bmodelBase="using:Richasy.BiliKernel.Models.Base"
    xmlns:bmodelUser="using:Richasy.BiliKernel.Models.User"
    xmlns:bmodelMoment="using:Richasy.BiliKernel.Models.Moment"
    xmlns:bmodelComment="using:Richasy.BiliKernel.Models.Comment"
    xmlns:bmodelMedia="using:Richasy.BiliKernel.Models.Media"
    xmlns:bmodelAppera="using:Richasy.BiliKernel.Models.Appearance"
    xmlns:helper="using:HotPotPlayer.Pages.Helper"
    xmlns:helper2="using:HotPotPlayer.Helpers"
    xmlns:momentHelper="using:HotPotPlayer.Common.Helper.Bilibili"
    xmlns:conv="using:HotPotPlayer.UI.Converters"
    xmlns:cont2="using:HotPotPlayer.UI.Controls"
    xmlns:cont3="using:HotPotPlayer.Controls.BilibiliSub"
    xmlns:brep="using:HotPotPlayer.Bilibili.Models.Reply"
    xmlns:ccont="using:CommunityToolkit.WinUI.Helpers"
    xmlns:dyn="using:HotPotPlayer.Bilibili.Models.Dynamic"
    xmlns:bv="using:HotPotPlayer.Bilibili.Models.Video"
    xmlns:ext="using:HotPotPlayer.UI.Extensions"
    xmlns:sel="using:HotPotPlayer.UI.Templates.Selectors"
    xmlns:local="using:HotPotPlayer.Templates">

    <Thickness x:Key="ListItemPadding" >12,0</Thickness>

    <sel:EvenOldTemplateSelector x:Key="EvenOldSeriesListTemplate" >
        <sel:EvenOldTemplateSelector.EvenTemplate>
            <DataTemplate x:DataType="models:VideoItem">
                <Grid Background="#40F4F7FE">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="{x:Bind Title}" TextTrimming="CharacterEllipsis" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansRegular}"/>
                    <TextBlock Grid.Column="1" Text="{x:Bind Duration.ToString('mm\\\\:ss')}" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansRegular}"/>
                </Grid>
            </DataTemplate>
        </sel:EvenOldTemplateSelector.EvenTemplate>
        <sel:EvenOldTemplateSelector.OddTemplate>
            <DataTemplate x:DataType="models:VideoItem">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="{x:Bind Title}" TextTrimming="CharacterEllipsis" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansRegular}"/>
                    <TextBlock Grid.Column="1" Text="{x:Bind Duration.ToString('mm\\\\:ss')}" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansRegular}"/>
                </Grid>
            </DataTemplate>
        </sel:EvenOldTemplateSelector.OddTemplate>
    </sel:EvenOldTemplateSelector>

    <sel:EvenOldTemplateSelector x:Key="EvenOldMusicListInAlbumTemplate" >
        <sel:EvenOldTemplateSelector.EvenTemplate>
            <DataTemplate x:DataType="jmodel:BaseItemDto">
                <Grid Background="#40F4F7FE" Padding="{StaticResource ListItemPadding}"
                      RightTapped="{x:Bind helper:ListHelper.RightTapMusicInListClick}" >
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="20" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="180" />
                        <ColumnDefinition Width="38" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="{x:Bind IndexNumber}" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansMedium}"/>
                    <TextBlock Grid.Column="1" Text="{x:Bind Name}" TextTrimming="CharacterEllipsis" VerticalAlignment="Center" />
                    <HyperlinkButton Grid.Column="2" Content="{x:Bind helper2:BaseItemDtoHelper.GetJellyfinArtists(Artists)}" VerticalAlignment="Center" Click="{x:Bind helper:AlbumHelper.ArtistClick}" Tag="{x:Bind }"  FontFamily="{ThemeResource MiSansRegular}"/>
                    <TextBlock Grid.Column="3" Text="{x:Bind helper2:BaseItemDtoHelper.GetJellyfinDuration(RunTimeTicks)}" VerticalAlignment="Center" />
                    <Button Grid.Column="4" Style="{StaticResource TransparentButton}" Margin="16,0,0,0" CornerRadius="4" Padding="4" Tag="{x:Bind }" Click="{x:Bind helper:ListHelper.RightTapMusicInListClick}" >
                        <SymbolIcon Symbol="More" />
                    </Button>
                </Grid>
            </DataTemplate>
        </sel:EvenOldTemplateSelector.EvenTemplate>
        <sel:EvenOldTemplateSelector.OddTemplate>
            <DataTemplate x:DataType="jmodel:BaseItemDto">
                <Grid Padding="{StaticResource ListItemPadding}"
                    RightTapped="{x:Bind helper:ListHelper.RightTapMusicInListClick}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="20" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="180" />
                        <ColumnDefinition Width="38" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="{x:Bind IndexNumber}" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansMedium}"/>
                    <TextBlock Grid.Column="1" Text="{x:Bind Name}" TextTrimming="CharacterEllipsis" VerticalAlignment="Center" />
                    <HyperlinkButton Grid.Column="2" Content="{x:Bind helper2:BaseItemDtoHelper.GetJellyfinArtists(Artists)}" VerticalAlignment="Center" Click="{x:Bind helper:AlbumHelper.ArtistClick}" Tag="{x:Bind }"  FontFamily="{ThemeResource MiSansRegular}"/>
                    <TextBlock Grid.Column="3" Text="{x:Bind helper2:BaseItemDtoHelper.GetJellyfinDuration(RunTimeTicks)}" VerticalAlignment="Center" />
                    <Button Grid.Column="4" Style="{StaticResource TransparentButton}" Margin="16,0,0,0" CornerRadius="4" Padding="4" Tag="{x:Bind }" Click="{x:Bind helper:ListHelper.RightTapMusicInListClick}">
                        <SymbolIcon Symbol="More" />
                    </Button>
                </Grid>
            </DataTemplate>
        </sel:EvenOldTemplateSelector.OddTemplate>
    </sel:EvenOldTemplateSelector>

    <sel:EvenOldTemplateSelector x:Key="EvenOldMusicListInPlayListTemplate" >
        <sel:EvenOldTemplateSelector.EvenTemplate>
            <DataTemplate x:DataType="jmodel:BaseItemDto">
                <Grid Background="#40F4F7FE" Padding="8"
                      CornerRadius="4"
                      RightTapped="{x:Bind helper:ListHelper.RightTapMusicInPlayListClick}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="24" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="48" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.RowSpan="2" Text="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource IndexConverter}}" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansBold}"/>
                    <cont2:ImageEx2 Grid.RowSpan="2" VerticalAlignment="Center" Margin="4,0,8,0" Grid.Column="1" Source="{x:Bind helper2:BaseItemDtoHelper.GetPrimaryJellyfinImageWithBlur(ImageTags, ImageBlurHashes, Id)}" Style="{StaticResource LocalMusicImageStyle}" Height="36" Width="36" CornerRadius="4" EnableLazyLoading="True"/>
                    <TextBlock Grid.Column="2" VerticalAlignment="Bottom" FontSize="14" TextTrimming="CharacterEllipsis" Text="{x:Bind Name}" FontFamily="{ThemeResource MiSansMedium}" ToolTipService.ToolTip="{x:Bind Name}"/>
                    <HyperlinkButton Grid.Row="1" Grid.Column="2" Padding="0" Content="{x:Bind helper2:BaseItemDtoHelper.GetJellyfinArtists(Artists)}" VerticalAlignment="Top" Click="{x:Bind helper:AlbumHelper.ArtistClick}" Tag="{x:Bind }" FontFamily="{ThemeResource MiSansRegular}" Foreground="Gray"/>
                    <HyperlinkButton Grid.RowSpan="2" Grid.Column="3" Margin="0,0,8,0" Content="{x:Bind Album}" VerticalAlignment="Center" Click="{x:Bind helper:AlbumHelper.AlbumInfoClick}" Tag="{x:Bind }" FontFamily="{ThemeResource MiSansRegular}"/>
                    <TextBlock Grid.RowSpan="2" Grid.Column="4" Text="{x:Bind helper2:BaseItemDtoHelper.GetJellyfinDuration(RunTimeTicks)}" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansRegular}"/>
                    <Button Grid.RowSpan="2" Grid.Column="5" Style="{StaticResource TransparentButton}" Margin="4,0,4,0" CornerRadius="4" Padding="4" Tag="{x:Bind }" Click="{x:Bind helper:ListHelper.RightTapMusicInPlayListClick}">
                        <SymbolIcon Symbol="More" />
                    </Button>
                </Grid>
            </DataTemplate>
        </sel:EvenOldTemplateSelector.EvenTemplate>
        <sel:EvenOldTemplateSelector.OddTemplate>
            <DataTemplate x:DataType="jmodel:BaseItemDto">
                <Grid Padding="8"
                      CornerRadius="4"
                      RightTapped="{x:Bind helper:ListHelper.RightTapMusicInPlayListClick}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="24" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="48" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.RowSpan="2" Text="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource IndexConverter}}" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansBold}"/>
                    <cont2:ImageEx2 Grid.RowSpan="2" VerticalAlignment="Center" Margin="4,0,8,0" Grid.Column="1" Source="{x:Bind helper2:BaseItemDtoHelper.GetPrimaryJellyfinImageWithBlur(ImageTags, ImageBlurHashes, Id)}" Style="{StaticResource LocalMusicImageStyle}" Height="36" Width="36" CornerRadius="4" EnableLazyLoading="True"/>
                    <TextBlock Grid.Column="2" VerticalAlignment="Bottom" FontSize="14" TextTrimming="CharacterEllipsis" Text="{x:Bind Name}" FontFamily="{ThemeResource MiSansMedium}" ToolTipService.ToolTip="{x:Bind Name}"/>
                    <HyperlinkButton Grid.Row="1" Grid.Column="2" Padding="0" Content="{x:Bind helper2:BaseItemDtoHelper.GetJellyfinArtists(Artists)}" VerticalAlignment="Top" Click="{x:Bind helper:AlbumHelper.ArtistClick}" Tag="{x:Bind }" FontFamily="{ThemeResource MiSansRegular}" Foreground="Gray"/>
                    <HyperlinkButton Grid.RowSpan="2" Grid.Column="3" Margin="0,0,8,0" Content="{x:Bind Album}" VerticalAlignment="Center" Click="{x:Bind helper:AlbumHelper.AlbumInfoClick}" Tag="{x:Bind }" FontFamily="{ThemeResource MiSansRegular}"/>
                    <TextBlock Grid.RowSpan="2" Grid.Column="4" Text="{x:Bind helper2:BaseItemDtoHelper.GetJellyfinDuration(RunTimeTicks)}" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansRegular}"/>
                    <Button Grid.RowSpan="2" Grid.Column="5" Style="{StaticResource TransparentButton}" Margin="4,0,4,0" CornerRadius="4" Padding="4" Tag="{x:Bind }" Click="{x:Bind helper:ListHelper.RightTapMusicInPlayListClick}">
                        <SymbolIcon Symbol="More" />
                    </Button>
                </Grid>
            </DataTemplate>
        </sel:EvenOldTemplateSelector.OddTemplate>
    </sel:EvenOldTemplateSelector>

    <sel:EvenOldTemplateSelector x:Key="EvenOldMusicListInArtistMusicListTemplate" >
        <sel:EvenOldTemplateSelector.EvenTemplate>
            <DataTemplate x:DataType="models:MusicItem">
                <Grid Background="#A0F4F7FE" Padding="{StaticResource ListItemPadding}"
                      RightTapped="{x:Bind helper:ListHelper.RightTapMusicInArtistMusicListClick}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="48" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="{x:Bind Title}" TextTrimming="CharacterEllipsis" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansRegular}"/>
                    <HyperlinkButton Grid.Column="1" Content="{x:Bind GetArtists()}" VerticalAlignment="Center" Click="{x:Bind helper:AlbumHelper.ArtistClick}" Tag="{x:Bind }" FontFamily="{ThemeResource MiSansRegular}"/>
                    <HyperlinkButton Grid.Column="2" Content="{x:Bind Album}" VerticalAlignment="Center" Click="{x:Bind helper:AlbumHelper.AlbumInfoClick}" Tag="{x:Bind }" FontFamily="{ThemeResource MiSansRegular}"/>
                    <TextBlock Grid.Column="3" Margin="8,0,0,0" Text="{x:Bind Duration.ToString('mm\\\\:ss')}" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansRegular}"/>
                    <Button Grid.Column="4" Style="{StaticResource TransparentButton}" Margin="16,0,0,0" CornerRadius="4" Padding="4" Tag="{x:Bind }" Click="{x:Bind helper:ListHelper.RightTapMusicInArtistMusicListClick}">
                        <SymbolIcon Symbol="More" />
                    </Button>
                </Grid>
            </DataTemplate>
        </sel:EvenOldTemplateSelector.EvenTemplate>
        <sel:EvenOldTemplateSelector.OddTemplate>
            <DataTemplate x:DataType="models:MusicItem">
                <Grid Padding="{StaticResource ListItemPadding}"
                    RightTapped="{x:Bind helper:ListHelper.RightTapMusicInArtistMusicListClick}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="48" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="{x:Bind Title}" TextTrimming="CharacterEllipsis" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansRegular}"/>
                    <HyperlinkButton Grid.Column="1" Margin="0,0,16,0" Content="{x:Bind GetArtists()}" VerticalAlignment="Center" Click="{x:Bind helper:AlbumHelper.ArtistClick}" Tag="{x:Bind }" FontFamily="{ThemeResource MiSansRegular}"/>
                    <HyperlinkButton Grid.Column="2" Margin="0,0,16,0" Content="{x:Bind Album}" VerticalAlignment="Center" Click="{x:Bind helper:AlbumHelper.AlbumInfoClick}" Tag="{x:Bind }" FontFamily="{ThemeResource MiSansRegular}"/>
                    <TextBlock Grid.Column="3" Margin="8,0,0,0" Text="{x:Bind Duration.ToString('mm\\\\:ss')}" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansRegular}"/>
                    <Button Grid.Column="4" Style="{StaticResource TransparentButton}" Margin="16,0,0,0" CornerRadius="4" Padding="4" Tag="{x:Bind }" Click="{x:Bind helper:ListHelper.RightTapMusicInArtistMusicListClick}">
                        <SymbolIcon Symbol="More" />
                    </Button>
                </Grid>
            </DataTemplate>
        </sel:EvenOldTemplateSelector.OddTemplate>
    </sel:EvenOldTemplateSelector>

    <sel:EvenOldTemplateSelector x:Key="EvenOldVideoListTemplate" >
        <sel:EvenOldTemplateSelector.EvenTemplate>
            <DataTemplate x:DataType="jmodel:BaseItemDto">
                <Grid Background="#40F4F7FE" Padding="8"
                  CornerRadius="4">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="24" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="48" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.RowSpan="2" Text="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource IndexConverter}}" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansBold}"/>
                    <cont2:ImageEx2 Grid.RowSpan="2" VerticalAlignment="Center" Margin="4,0,8,0" Grid.Column="1" Source="{x:Bind helper2:BaseItemDtoHelper.GetPrimaryJellyfinImageWithBlur(ImageTags, ImageBlurHashes, Id)}" Style="{StaticResource LocalMusicImageStyle}" Height="81" Width="144" CornerRadius="4" EnableLazyLoading="False" />
                    <TextBlock Grid.Column="2" Grid.ColumnSpan="2" Margin="0,0,32,2" VerticalAlignment="Bottom" FontSize="18" TextTrimming="CharacterEllipsis" Text="{x:Bind Name}" FontFamily="{ThemeResource MiSansMedium}" ToolTipService.ToolTip="{x:Bind Name}"/>
                    <TextBlock Grid.Row="1" Grid.Column="2" Grid.ColumnSpan="2" Margin="0,0,8,0" VerticalAlignment="Top" FontSize="14" MaxLines="2" TextWrapping="Wrap" TextTrimming="CharacterEllipsis" Text="{x:Bind Overview}" Foreground="Gray" FontFamily="{ThemeResource MiSansRegular}" ToolTipService.ToolTip="{x:Bind Overview}"/>
                    <TextBlock Grid.RowSpan="2" Grid.Column="4" Text="{x:Bind helper2:BaseItemDtoHelper.GetJellyfinDuration(RunTimeTicks)}" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansRegular}"/>
                    <Button Grid.RowSpan="2" Grid.Column="5" Style="{StaticResource TransparentButton}" Margin="4,0,4,0" CornerRadius="4" Padding="4" Tag="{x:Bind }" >
                        <SymbolIcon Symbol="More" />
                    </Button>
                </Grid>
            </DataTemplate>
        </sel:EvenOldTemplateSelector.EvenTemplate>
        <sel:EvenOldTemplateSelector.OddTemplate>
            <DataTemplate x:DataType="jmodel:BaseItemDto">
                <Grid Padding="8"
                  CornerRadius="4">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="2*" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="24" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="48" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.RowSpan="2" Text="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource IndexConverter}}" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansBold}"/>
                    <cont2:ImageEx2 Grid.RowSpan="2" VerticalAlignment="Center" Margin="4,0,8,0" Grid.Column="1" Source="{x:Bind helper2:BaseItemDtoHelper.GetPrimaryJellyfinImageWithBlur(ImageTags, ImageBlurHashes, Id)}" Style="{StaticResource LocalMusicImageStyle}" Height="81" Width="144" CornerRadius="4" EnableLazyLoading="False"/>
                    <TextBlock Grid.Column="2" Grid.ColumnSpan="2" Margin="0,0,32,2" VerticalAlignment="Bottom" FontSize="18" TextTrimming="CharacterEllipsis" Text="{x:Bind Name}" FontFamily="{ThemeResource MiSansMedium}" ToolTipService.ToolTip="{x:Bind Name}"/>
                    <TextBlock Grid.Row="1" Grid.Column="2" Grid.ColumnSpan="2" Margin="0,0,8,0" VerticalAlignment="Top" FontSize="14" MaxLines="2" TextWrapping="Wrap" TextTrimming="CharacterEllipsis" Text="{x:Bind Overview}" Foreground="Gray" FontFamily="{ThemeResource MiSansRegular}" ToolTipService.ToolTip="{x:Bind Overview}"/>
                    <TextBlock Grid.RowSpan="2" Grid.Column="4" Text="{x:Bind helper2:BaseItemDtoHelper.GetJellyfinDuration(RunTimeTicks)}" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansRegular}"/>
                    <Button Grid.RowSpan="2" Grid.Column="5" Style="{StaticResource TransparentButton}" Margin="4,0,4,0" CornerRadius="4" Padding="4" Tag="{x:Bind }" >
                        <SymbolIcon Symbol="More" />
                    </Button>
                </Grid>
            </DataTemplate>
        </sel:EvenOldTemplateSelector.OddTemplate>
    </sel:EvenOldTemplateSelector>

    <conv:IndexConverter x:Key="TopListIndexConverter" />
    
    <DataTemplate x:Key="TopListTemplate" x:DataType="modelsC:TopListTrack">
        <Grid Padding="12,8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <StackPanel Orientation="Horizontal" Spacing="8" >
                <TextBlock FontSize="12" Text="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource TopListIndexConverter}}" VerticalAlignment="Center" FontFamily="{StaticResource MiSansBold}"/>
                <TextBlock FontSize="12" Text="{x:Bind First}" VerticalAlignment="Center" FontFamily="{StaticResource MiSansMedium}"/>
                <TextBlock FontSize="12" Text="{x:Bind GetSecond()}" Foreground="Gray" TextTrimming="CharacterEllipsis" VerticalAlignment="Center" FontFamily="{StaticResource MiSansRegular}"/>
            </StackPanel>
            <FontIcon Grid.Column="1" FontFamily="{ThemeResource SegoeIcons}" Glyph="&#xE014;" FontSize="12"/>
        </Grid>

    </DataTemplate>

    <DataTemplate x:Key="CommentTemplate" x:DataType="modelsC:CloudCommentItem">
        <Grid Padding="0,8,0,0" Tapped="{x:Bind helper:CommentHelper.ShowCommentInput}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <cont2:ImageEx2 Margin="0,0,8,0" Grid.RowSpan="2" Source="{x:Bind User.AvatarUrl}" Height="36" Width="36" CornerRadius="20" Style="{StaticResource LocalMusicImageStyle}"/>
                <TextBlock Grid.Column="1" Text="{x:Bind User.NickName}" FontFamily="{StaticResource MiSansRegular}"/>
                <TextBlock Grid.Column="1" Margin="0,2,0,0" Grid.Row="1" Text="{x:Bind TimeStr}" Foreground="Gray" FontSize="12" FontFamily="{StaticResource MiSansRegular}"/>
                <TextBlock Grid.Column="2" Grid.RowSpan="2" Text="{x:Bind LikedCount}" VerticalAlignment="Center" Foreground="Gray" FontSize="12" FontFamily="{StaticResource MiSansRegular}"/>
                <Button Grid.Column="3" Grid.RowSpan="2" Margin="4,0,8,0" VerticalAlignment="Center" Style="{StaticResource FullTransparentButton}" >
                    <FontIcon FontFamily="{ThemeResource SegoeIcons}" Glyph="&#xE19F;" Foreground="Gray" FontSize="14"/>
                </Button>
            </Grid>
            <TextBlock Grid.Row="1" Margin="42,8,0,0" Text="{x:Bind Content}" TextWrapping="Wrap" FontFamily="{StaticResource MiSansRegular}"/>
            <HyperlinkButton Grid.Row="2" Margin="34,4,0,0" Padding="8,2,6,4" Content="查看回复" Click="{x:Bind helper:CommentHelper.ShowCommentFloor}"/>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="VideoReplyTemplateNoPadding" x:DataType="brep:Reply">
        <Grid Padding="0,8,0,8" >
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <cont2:ImageEx2 Margin="0,0,8,0" Grid.RowSpan="2" Source="{x:Bind Member.Avatar}" Height="40" Width="40" CornerRadius="8" Style="{StaticResource LocalMusicImageStyle}"/>
                <TextBlock Grid.Column="1" Text="{x:Bind Member.UName}" FontFamily="{StaticResource MiSansRegular}"/>
                <TextBlock Grid.Column="1" Margin="0,2,0,0" Grid.Row="1" Text="{x:Bind TimeStr}" Foreground="Gray" FontSize="12" FontFamily="{StaticResource MiSansRegular}"/>
                <TextBlock Grid.Column="2" Grid.RowSpan="2" Text="{x:Bind Like}" VerticalAlignment="Center" Foreground="Gray" FontSize="12" FontFamily="{StaticResource MiSansRegular}"/>

                <StackPanel Grid.Column="3" Grid.RowSpan="2" Margin="4,0,8,0" VerticalAlignment="Center" Orientation="Horizontal" Spacing="8">
                    <Button Style="{StaticResource FullTransparentButton}" >
                        <ImageIcon Source="ms-appx:///Assets/Icon/Like3.svg" Width="18" />
                    </Button>
                    <Button Style="{StaticResource FullTransparentButton}">
                        <ImageIcon Source="ms-appx:///Assets/Icon/Dislike.svg" Width="18" />
                    </Button>
                </StackPanel>

            </Grid>
            <TextBlock Grid.Row="1" Margin="48,8,0,0" Text="{x:Bind Content.Message}" TextWrapping="Wrap" FontFamily="{StaticResource MiSansRegular}"/>
            <StackPanel Grid.Row="2" Margin="48,8,8,0" Visibility="{x:Bind HasNestedReply}">
                <HyperlinkButton Margin="-10,0,0,0" Content="{x:Bind GetNestedReplyStr}" Click="{x:Bind helper:CommentHelper.ShowNestedReply}"/>
            </StackPanel>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="VideoReplyTemplate" x:DataType="bmodelComment:CommentInformation">
        <Grid Padding="16,8,16,8" >
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <cont2:ImageEx2 Margin="0,0,8,0" Grid.RowSpan="2" Source="{x:Bind User.User.Avatar.Uri}" Height="40" Width="40" DecodePixelWidth="40" DecodePixelHeight="40" CornerRadius="8" Style="{StaticResource LocalMusicImageStyle}"/>
                <TextBlock Grid.Column="1" Text="{x:Bind User.User.Name}" FontFamily="{StaticResource MiSansRegular}"/>
                <TextBlock Grid.Column="1" Margin="0,2,0,0" Grid.Row="1" Text="{x:Bind ext:BiliUIExtensions.GetDateTimeStr(PublishTime)}" Foreground="Gray" FontSize="12" FontFamily="{StaticResource MiSansRegular}"/>
                <TextBlock Grid.Column="2" Grid.RowSpan="2" Text="{x:Bind CommunityInformation.LikeCount}" VerticalAlignment="Center" Foreground="Gray" FontSize="12" FontFamily="{StaticResource MiSansRegular}"/>

                <StackPanel Grid.Column="3" Grid.RowSpan="2" Margin="4,0,8,0" VerticalAlignment="Center" Orientation="Horizontal" Spacing="8">
                    <Button Style="{StaticResource FullTransparentButton}" >
                        <ImageIcon Source="ms-appx:///Assets/Icon/Like3.svg" Width="18" />
                    </Button>
                    <Button Style="{StaticResource FullTransparentButton}">
                        <ImageIcon Source="ms-appx:///Assets/Icon/Dislike.svg" Width="18" />
                    </Button>
                </StackPanel>

            </Grid>
            <ContentControl Grid.Row="1" 
                           Margin="48,8,0,0" 
                           Content="{x:Bind ext:BiliUIExtensions.GenRichTextBlock(Content)}"
                           FontFamily="{StaticResource MiSansRegular}" />
            <!--<StackPanel Grid.Row="2" Margin="48,8,8,0" Visibility="{x:Bind HasNestedReply}">
                <HyperlinkButton Margin="-10,0,0,0" Content="{x:Bind GetNestedReplyStr}" Click="{x:Bind helper:CommentHelper.ShowNestedReply}"/>
            </StackPanel>-->
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="CommentFloorTemplate" x:DataType="modelsC:CloudCommentItem">
        <Grid Padding="0,8,0,4" Tapped="{x:Bind helper:CommentHelper.ShowCommentInput}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <cont2:ImageEx2 Margin="0,0,8,0" Grid.RowSpan="2" Source="{x:Bind User.AvatarUrl}" Height="36" Width="36" CornerRadius="20" Style="{StaticResource LocalMusicImageStyle}"/>
                <TextBlock Grid.Column="1" Text="{x:Bind User.NickName}" FontFamily="{StaticResource MiSansRegular}"/>
                <TextBlock Grid.Column="1" Margin="0,2,0,0" Grid.Row="1" Text="{x:Bind TimeStr}" Foreground="Gray" FontSize="12" FontFamily="{StaticResource MiSansRegular}"/>
                <TextBlock Grid.Column="2" Grid.RowSpan="2" Text="{x:Bind LikedCount}" VerticalAlignment="Center" Foreground="Gray" FontSize="12" FontFamily="{StaticResource MiSansRegular}"/>
                <Button Grid.Column="3" Grid.RowSpan="2" Margin="4,0,8,0" VerticalAlignment="Center" Style="{StaticResource FullTransparentButton}" >
                    <FontIcon FontFamily="{ThemeResource SegoeIcons}" Glyph="&#xE19F;" Foreground="Gray" FontSize="14"/>
                </Button>
            </Grid>
            <TextBlock Grid.Row="1" Margin="42,8,0,0" Text="{x:Bind Content}" TextWrapping="Wrap" FontFamily="{StaticResource MiSansRegular}"/>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="SearchMusicListTemplate" x:DataType="modelsC:CloudMusicItem">
        <Grid Padding="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <cont2:ImageEx2 Margin="0,0,8,0" Grid.RowSpan="2" Source="{x:Bind Cover}" Height="36" Width="36" CornerRadius="4" Style="{StaticResource LocalMusicImageStyle}"/>
            <TextBlock Grid.Column="1" Text="{x:Bind Title}" TextTrimming="CharacterEllipsis" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansRegular}"/>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="CloudMusicCardViewInPlayListTemplate" x:DataType="models:MusicItem">
        <Grid Padding="8" CornerRadius="4" RightTapped="{x:Bind helper:ListHelper.RightTapMusicInCloudPlayListClick}">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="24" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBlock Grid.RowSpan="2" HorizontalAlignment="Center" Text="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource IndexConverter}}" FontSize="12" FontFamily="{ThemeResource MiSansBold}" VerticalAlignment="Center"/>
            <cont2:ImageEx2 Grid.RowSpan="2" VerticalAlignment="Center" Margin="4,0,8,0" Grid.Column="1" Source="{x:Bind Cover}" Style="{StaticResource LocalMusicImageStyle}" Height="36" Width="36" CornerRadius="4" EnableLazyLoading="False"/>
            <TextBlock Grid.Column="2" VerticalAlignment="Bottom" FontSize="14" TextTrimming="CharacterEllipsis" Text="{x:Bind Title}" FontFamily="{ThemeResource MiSansMedium}" ToolTipService.ToolTip="{x:Bind Title}"/>
            <HyperlinkButton Grid.Row="1" Grid.Column="2" Padding="0" Content="{x:Bind GetArtists()}" VerticalAlignment="Top" Click="{x:Bind helper:AlbumHelper.ArtistClick}" Tag="{x:Bind }" FontFamily="{ThemeResource MiSansRegular}" Foreground="Gray"/>
            <HyperlinkButton Grid.RowSpan="2" Grid.Column="3" Margin="0,0,8,0" Content="{x:Bind Album}" VerticalAlignment="Center" Click="{x:Bind helper:AlbumHelper.AlbumInfoClick}" Tag="{x:Bind }" FontFamily="{ThemeResource MiSansRegular}"/>
            <Button Grid.RowSpan="2" Grid.Column="4" Margin="4,0,4,0" Style="{StaticResource TransparentButton}" CornerRadius="4" Padding="4" Tag="{x:Bind }" Click="{x:Bind helper:ListHelper.RightTapMusicInCloudPlayListClick}">
                <SymbolIcon Symbol="More" />
            </Button>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="CloudMusicCardViewInAlbumTemplate" x:DataType="models:MusicItem">
        <Grid Padding="8" CornerRadius="4" RightTapped="{x:Bind helper:ListHelper.RightTapMusicInCloudPlayListClick}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="24" />
                <ColumnDefinition Width="2*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="52" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBlock HorizontalAlignment="Center" Text="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource IndexConverter}}" FontSize="12" FontFamily="{ThemeResource MiSansBold}" VerticalAlignment="Center"/>
            <TextBlock Grid.Column="1" VerticalAlignment="Center" FontSize="14" TextTrimming="CharacterEllipsis" Text="{x:Bind Title}" FontFamily="{ThemeResource MiSansMedium}" ToolTipService.ToolTip="{x:Bind Title}"/>
            <HyperlinkButton Grid.Column="2" Content="{x:Bind GetArtists()}" VerticalAlignment="Center" Click="{x:Bind helper:AlbumHelper.ArtistClick}" Tag="{x:Bind }" FontFamily="{ThemeResource MiSansRegular}" />
            <TextBlock Grid.Column="3" Text="{x:Bind Duration.ToString('mm\\\\:ss')}" VerticalAlignment="Center" FontFamily="{ThemeResource MiSansRegular}"/>
            <Button Grid.Column="4" Margin="4,0,4,0" Style="{StaticResource TransparentButton}" CornerRadius="4" Padding="4" Tag="{x:Bind }" Click="{x:Bind helper:ListHelper.RightTapMusicInCloudPlayListClick}">
                <SymbolIcon Symbol="More" />
            </Button>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="TagWrapTemplate" x:DataType="x:String">
        <Grid BorderBrush="Gray" BorderThickness="1" CornerRadius="10" Padding="8,0">
            <TextBlock Text="{x:Bind }" FontFamily="{StaticResource MiSansRegular}"/>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="GenreWrapTemplate" x:DataType="jmodel:NameGuidPair">
        <Grid BorderBrush="Gray" BorderThickness="1" CornerRadius="10" Padding="8,0">
            <TextBlock Text="{x:Bind Name}" FontFamily="{StaticResource MiSansRegular}"/>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="JellyfinTagTemplate" x:DataType="x:String">
        <Grid BorderBrush="Gray" BorderThickness="1" CornerRadius="10" Padding="8,0">
            <TextBlock Text="{x:Bind}" FontFamily="{StaticResource MiSansRegular}"/>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="ArtistWrapTemplate" x:DataType="modelsC:CloudArtistItem">
        <Grid BorderBrush="Gray" BorderThickness="1" CornerRadius="12" Padding="0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <cont2:ImageEx2 Source="{x:Bind Avatar}" Style="{StaticResource LocalMusicImageStyle}" Width="24" Height="24" />
            <TextBlock Grid.Column="1" VerticalAlignment="Center" Margin="8,0" Text="{x:Bind Name}" FontFamily="{StaticResource MiSansRegular}"/>
        </Grid>
    </DataTemplate>

    <UniformGridLayout x:Key="DynamicUniformGridLayout" Orientation="Horizontal" MinRowSpacing="4" MinColumnSpacing="4" MinItemHeight="200" MinItemWidth="200"/>

    <DataTemplate x:Key="DynamicMultiDrawTemplate" x:DataType="bmodelAppera:BiliImage">
        <cont2:ImageEx2 Source="{x:Bind Uri}" Width="180" Height="180" CornerRadius="4" Style="{StaticResource DynamicImageStyle}"/>
    </DataTemplate>

    <DataTemplate x:Key="ArticleCoverTemplate" x:DataType="x:String">
        <cont2:ImageEx2 Source="{x:Bind }" MaxHeight="160" CornerRadius="4" Style="{StaticResource DynamicImageStyle}"/>
    </DataTemplate>

    <DataTemplate x:Key="InteractionItemTemplate" x:DataType="dyn:InteractionItem">
        <Grid >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Rectangle Width="2" Fill="LightGray" VerticalAlignment="Stretch"/>
            <FontIcon Margin="8,0" Grid.Column="1" FontFamily="{ThemeResource BiliIcons}" Glyph="{x:Bind GetIcon()}" FontSize="15" VerticalAlignment="Center" Foreground="Gray"/>
            <!--<TextBlock Grid.Column="2" VerticalAlignment="Center" Text="{x:Bind Desc.SimpleText}" FontFamily="{ThemeResource MiSansRegular}" />-->
            <!--<RichTextBlock Grid.Column="2" VerticalAlignment="Center" DataContext="{x:Bind }" Loaded="RichTextBlock_Loaded" FontFamily="{ThemeResource MiSansRegular}" />-->
            <!--<ContentControl Grid.Column="2" VerticalAlignment="Center" DataContext="{x:Bind }"
                                FontFamily="{ThemeResource MiSansRegular}"
                                Foreground="Gray"
                                Content="{x:Bind ext:BiliUIExtensions.GenRichTextBlock(Desc)}"
                                />-->
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="DynamicTemplate" x:DataType="bmodelMoment:MomentInformation">
        <StackPanel Padding="16" Background="White">
            <!--Header-->
            <Grid >
                <Grid.RowDefinitions>
                    <RowDefinition Height="1*" />
                    <RowDefinition Height="1*" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Button Grid.RowSpan="2" Margin="0,0,8,0" Click="UserAvatarClick" Style="{StaticResource TransparentButton}">
                    <cont2:ImageEx2  Width="40" Height="40" Source="{x:Bind User.Avatar.Uri}" CornerRadius="20" Style="{StaticResource LocalMusicImageStyle}" />
                    <Button.ContextFlyout>
                        <Flyout>
                            <cont3:UserCard Margin="-16" Mid="{x:Bind User.Id}" />
                        </Flyout>
                    </Button.ContextFlyout>
                </Button>
                <TextBlock Grid.Column="1" VerticalAlignment="Bottom" FontFamily="{ThemeResource MiSansMedium}" Text="{x:Bind User.Name}" Foreground="#fb799d"/>
                <TextBlock Grid.Column="1" VerticalAlignment="Top" Margin="0,2,0,0" Grid.Row="1" FontFamily="{ThemeResource MiSansRegular}" FontSize="12" Foreground="Gray" Text="{x:Bind Tip}"/>
                <Button Grid.Column="2" Grid.RowSpan="2" Style="{StaticResource TransparentButton}" CornerRadius="4" Padding="4" Tag="{x:Bind }">
                    <SymbolIcon Symbol="More" />
                </Button>
            </Grid>
            
            <!--Main Content-->
            <ContentControl Margin="0,8,0,0" Visibility="{x:Bind ext:BiliUIExtensions.IsDescVisible((bmodelMoment:MomentInformation))}" DataContext="{x:Bind }"
                            FontFamily="{ThemeResource MiSansRegular}"
                            Content="{x:Bind ext:BiliUIExtensions.GenRichTextBlock(Description)}"
                            />

            <!--Article-->
            <!--<StackPanel Margin="0,8,0,0" Visibility="{x:Bind ext:BiliUIExtensions.IsArticleVisible((bmodelMoment:MomentInformation))}"
                        Padding="16,8" 
                        Background="#f4f5f7" CornerRadius="4">
                <TextBlock FontFamily="{ThemeResource MiSansMedium}" Text="{x:Bind Modules.ModuleDynamic.Major.Article.Title}" TextWrapping="Wrap" />
                <ccont:AdaptiveGridView Margin="0,8,0,0" Visibility="{x:Bind Modules.ModuleDynamic.HasArticleCover}" 
                                    DesiredWidth="200"
                                    ItemTemplate="{StaticResource ArticleCoverTemplate}"
                                    ItemsSource="{x:Bind Modules.ModuleDynamic.Major.Article.Covers}" >

                </ccont:AdaptiveGridView>
                <TextBlock Margin="0,4" FontFamily="{ThemeResource MiSansRegular}" Text="{x:Bind Modules.ModuleDynamic.Major.Article.Desc}" Foreground="Gray" TextWrapping="Wrap" MaxLines="4" TextTrimming="CharacterEllipsis"/>
                <TextBlock FontFamily="{ThemeResource MiSansRegular}" Text="{x:Bind Modules.ModuleDynamic.Major.Article.Label}" Foreground="LightGray" FontSize="13" TextWrapping="Wrap" />
            </StackPanel>-->

            <!--OneImage (Article/Video/Image)-->
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <cont2:ImageEx2 Margin="0,8,0,0" 
                            Source="{x:Bind ext:BiliUIExtensions.GetSingleImageSource((bmodelMoment:MomentInformation))}" 
                            Visibility="{x:Bind ext:BiliUIExtensions.IsSingleImage((bmodelMoment:MomentInformation))}" 
                            CornerRadius="4" 
                            Width="{x:Bind ext:BiliUIExtensions.GetSingleImageWidth((bmodelMoment:MomentInformation))}"
                            Style="{StaticResource DynamicImageStyle}"/>

                <Grid VerticalAlignment="Bottom" Padding="12,8"
                      Visibility="{x:Bind ext:BiliUIExtensions.GetVideoStatVisible((bmodelMoment:MomentInformation))}" >
                    <Grid.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Offset="0" Color="Transparent"/>
                            <GradientStop Offset="0.2" Color="#10000000"/>
                            <GradientStop Offset="0.9" Color="#50000000"/>
                        </LinearGradientBrush>
                    </Grid.Background>
                    <StackPanel Orientation="Horizontal" Spacing="16">
                        <Border Background="#80000000" CornerRadius="4" Padding="8,4">
                            <TextBlock Foreground="White" FontSize="13" Text="{x:Bind ext:BiliUIExtensions.GetVideoDuration((bmodelMoment:MomentInformation))}" FontFamily="{ThemeResource MiSansRegular}" />
                        </Border>
                        <TextBlock VerticalAlignment="Center" FontSize="13" Foreground="White" Text="{x:Bind ext:BiliUIExtensions.GetVideoPlayCount((bmodelMoment:MomentInformation))}" FontFamily="{ThemeResource MiSansRegular}" />
                        <TextBlock VerticalAlignment="Center" FontSize="13" Foreground="White" Text="{x:Bind ext:BiliUIExtensions.GetVideoDanmakuCount((bmodelMoment:MomentInformation))}" FontFamily="{ThemeResource MiSansRegular}" />
                    </StackPanel>
                </Grid>

                <FontIcon VerticalAlignment="Bottom" 
                          HorizontalAlignment="Right" 
                          Margin="0,0,28,16" 
                          FontSize="48"
                          Foreground="#80ffffff"
                          Visibility="{x:Bind ext:BiliUIExtensions.GetVideoStatVisible((bmodelMoment:MomentInformation))}"
                          FontFamily="{ThemeResource SegoeIcons}" 
                          Glyph="&#xEB49;" />

                <TextBlock Grid.Row="1" 
                           Margin="0,4,0,0" 
                           FontSize="14" 
                           Visibility="{x:Bind ext:BiliUIExtensions.GetVideoStatVisible((bmodelMoment:MomentInformation))}"
                           Text="{x:Bind ext:BiliUIExtensions.GetTitle((bmodelMoment:MomentInformation))}" 
                           FontFamily="{ThemeResource MiSansMedium}" 
                           TextWrapping="Wrap"/>
            </Grid>

            <!--MultiImage-->
            <GridView Margin="0,8,0,0" 
                      HorizontalAlignment="Left"
                      Visibility="{x:Bind ext:BiliUIExtensions.IsMultiImage((bmodelMoment:MomentInformation))}" 
                      ItemTemplate="{StaticResource DynamicMultiDrawTemplate}"
                      ItemsSource="{x:Bind ext:BiliUIExtensions.GetMultiImageSource((bmodelMoment:MomentInformation))}">
                
                <GridView.ItemContainerStyle>
                    <Style TargetType="GridViewItem" BasedOn="{StaticResource DefaultGridViewItemStyle}">
                        <Setter Property="Margin" Value="4,4,4,4"/>
                    </Style>
                </GridView.ItemContainerStyle>

                <GridView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <ItemsWrapGrid
                           MaximumRowsOrColumns="3"
                           Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </GridView.ItemsPanel>

            </GridView>

            <!--Forward-->
            <!--<StackPanel Margin="36,8,8,0" Padding="16,8" Visibility="{x:Bind HasOrigin}" Background="#f4f5f7" CornerRadius="4">
                <StackPanel Orientation="Horizontal" Spacing="4">
                    <cont2:ImageEx2 Grid.RowSpan="2" Width="28" Height="28" Source="{x:Bind Origin.Modules.ModuleAuthor.Face}" CornerRadius="20" Style="{StaticResource LocalMusicImageStyle}"/>
                    <TextBlock VerticalAlignment="Center" Text="{x:Bind Origin.Modules.ModuleAuthor.Name}" FontFamily="{ThemeResource MiSansRegular}" Foreground="#00a1d6"/>
                </StackPanel>
                <TextBlock Margin="0,8,0,0" Visibility="{x:Bind Origin.Modules.ModuleDynamic.HasDesc}" FontFamily="{ThemeResource MiSansRegular}" TextWrapping="Wrap" Text="{x:Bind Origin.Modules.ModuleDynamic.Desc.Text}"/>
                <Grid Margin="0,8,0,0" Visibility="{x:Bind Origin.Modules.ModuleDynamic.HasArchive}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <cont2:ImageEx2 Source="{x:Bind Origin.Modules.ModuleDynamic.Major.Archive.Cover}" CornerRadius="4" Style="{StaticResource DynamicImageStyle}"/>

                    <Grid VerticalAlignment="Bottom" Padding="12,8">
                        <Grid.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Offset="0" Color="Transparent"/>
                                <GradientStop Offset="0.2" Color="#10000000"/>
                                <GradientStop Offset="0.9" Color="#50000000"/>
                            </LinearGradientBrush>
                        </Grid.Background>
                        <StackPanel Orientation="Horizontal" Spacing="16">
                            <Border Background="#80000000" CornerRadius="4" Padding="8,4">
                                <TextBlock Foreground="White" FontSize="12" Text="{x:Bind Origin.Modules.ModuleDynamic.Major.Archive.DurationText}" FontFamily="{ThemeResource MiSansRegular}" />
                            </Border>
                            <TextBlock VerticalAlignment="Center" FontSize="12" Foreground="White" Text="{x:Bind Origin.Modules.ModuleDynamic.Major.Archive.Stat.GetPlay}" FontFamily="{ThemeResource MiSansRegular}" />
                            <TextBlock VerticalAlignment="Center" FontSize="12" Foreground="White" Text="{x:Bind Origin.Modules.ModuleDynamic.Major.Archive.Stat.GetDanmaku}" FontFamily="{ThemeResource MiSansRegular}" />
                        </StackPanel>
                    </Grid>
                    <TextBlock Grid.Row="1" Margin="0,4,0,0" FontSize="14" Text="{x:Bind Origin.Modules.ModuleDynamic.Major.Archive.Title}" FontFamily="{ThemeResource MiSansMedium}" TextWrapping="Wrap"/>
                </Grid>
                <ccont:AdaptiveGridView Margin="0,8,0,0" Visibility="{x:Bind Origin.Modules.ModuleDynamic.IsMultiDraw}" 
                                    DesiredWidth="160"
                                    ItemTemplate="{StaticResource DynamicMultiDrawTemplate}"
                                    ItemsSource="{x:Bind Origin.Modules.ModuleDynamic.Major.Draw.Items}">

                </ccont:AdaptiveGridView>
            </StackPanel>-->

            <!--Archive-->
            <!--<Grid Margin="0,8,0,0" Visibility="{x:Bind Modules.ModuleDynamic.HasArchive}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <cont2:ImageEx2 Source="{x:Bind Modules.ModuleDynamic.Major.Archive.Cover}" CornerRadius="4" Style="{StaticResource DynamicImageStyle}"/>

                <Grid VerticalAlignment="Bottom" Padding="12,8">
                    <Grid.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Offset="0" Color="Transparent"/>
                            <GradientStop Offset="0.2" Color="#10000000"/>
                            <GradientStop Offset="0.9" Color="#50000000"/>
                        </LinearGradientBrush>
                    </Grid.Background>
                    <StackPanel Orientation="Horizontal" Spacing="16">
                        <Border Background="#80000000" CornerRadius="4" Padding="8,4">
                            <TextBlock Foreground="White" FontSize="12" Text="{x:Bind Modules.ModuleDynamic.Major.Archive.DurationText}" FontFamily="{ThemeResource MiSansRegular}" />
                        </Border>
                        <TextBlock VerticalAlignment="Center" FontSize="12" Foreground="White" Text="{x:Bind Modules.ModuleDynamic.Major.Archive.Stat.GetPlay}" FontFamily="{ThemeResource MiSansRegular}" />
                        <TextBlock VerticalAlignment="Center" FontSize="12" Foreground="White" Text="{x:Bind Modules.ModuleDynamic.Major.Archive.Stat.GetDanmaku}" FontFamily="{ThemeResource MiSansRegular}" />
                    </StackPanel>
                </Grid>
                <TextBlock Grid.Row="1" Margin="0,4,0,0" FontSize="14" Text="{x:Bind Modules.ModuleDynamic.Major.Archive.Title}" FontFamily="{ThemeResource MiSansMedium}" TextWrapping="Wrap"/>
            </Grid>-->
            
            <!--Reserve-->
            <!--<Grid Margin="0,8,0,0" Padding="16,8" Visibility="{x:Bind Modules.ModuleDynamic.HasReserve}" Background="#f4f5f7" CornerRadius="4">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <TextBlock Margin="0,0,0,0" FontSize="14" Text="{x:Bind Modules.ModuleDynamic.Additional.Reserve.Title}" FontFamily="{ThemeResource MiSansMedium}" TextWrapping="Wrap"/>
                <StackPanel Grid.Row="1" Margin="0,4,0,0" Orientation="Horizontal" Spacing="16">
                    <TextBlock Margin="0,0,0,0" FontSize="12" Text="{x:Bind Modules.ModuleDynamic.Additional.Reserve.Desc1.Text}" FontFamily="{ThemeResource MiSansRegular}" Foreground="Gray"/>
                    <TextBlock Margin="0,0,0,0" FontSize="12" Text="{x:Bind Modules.ModuleDynamic.Additional.Reserve.Desc2.Text}" FontFamily="{ThemeResource MiSansRegular}" Foreground="Gray"/>
                </StackPanel>
                <Button Grid.Column="1" Grid.RowSpan="2" Margin="8" FontFamily="{ThemeResource MiSansRegular}" Style="{ThemeResource AccentButtonStyle}">
                    预约
                </Button>
            </Grid>-->

            <!--Live-->
            <!--<Grid Margin="0,8,0,0" Visibility="{x:Bind Modules.ModuleDynamic.HasLive}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <cont2:ImageEx2 Source="{x:Bind Modules.ModuleDynamic.Major.LiveRcmd.Cover}" CornerRadius="4" Style="{StaticResource DynamicImageStyle}"/>
                <TextBlock Grid.Row="1" Margin="0,4,0,0" FontSize="14" Text="{x:Bind Modules.ModuleDynamic.Major.LiveRcmd.Title}" FontFamily="{ThemeResource MiSansMedium}" TextWrapping="Wrap"/>
                <StackPanel Orientation="Horizontal" Margin="8,8" CornerRadius="4" HorizontalAlignment="Right" VerticalAlignment="Top">
                    <Border Background="#808080" Padding="8,4">
                        <TextBlock FontSize="14" Foreground="White" Text="{x:Bind Modules.ModuleDynamic.Major.LiveRcmd.TextLarge}" FontFamily="{ThemeResource MiSansRegular}" />
                    </Border>
                    <Border Background="#fa7298" Padding="8,4">
                        <TextBlock FontSize="14" Foreground="White" Text="直播中" FontFamily="{ThemeResource MiSansRegular}" />
                    </Border>
                </StackPanel>
                <Grid VerticalAlignment="Bottom">
                    <Grid.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Offset="0" Color="Transparent"/>
                            <GradientStop Offset="0.2" Color="#10000000"/>
                            <GradientStop Offset="0.9" Color="#50000000"/>
                        </LinearGradientBrush>
                    </Grid.Background>
                    <TextBlock VerticalAlignment="Bottom" Margin="8,64,8,8" FontSize="14" Foreground="White" Text="{x:Bind Modules.ModuleDynamic.Major.LiveRcmd.AreaName}" FontFamily="{ThemeResource MiSansRegular}" />
                </Grid>
            </Grid>-->

            <!--Interaction-->
            <!--<ListView Margin="0,12,0,0" Visibility="{x:Bind Modules.HasInteraction}"
                      ItemsSource="{x:Bind Modules.ModuleInteraction.Items}"
                      Style="{StaticResource GeneralListViewStyle}"
                      ItemContainerStyle="{StaticResource GeneralListContainerCompactStyle}"
                      ItemTemplate="{StaticResource InteractionItemTemplate}"
                      >

            </ListView>-->

            <!--ThreeButton-->
            <Grid Margin="0,16,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Button HorizontalAlignment="Center" Style="{StaticResource TransparentButton}">
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <ImageIcon Source="ms-appx:///Assets/Icon/Forward.svg" Margin="0,0,0,0" Width="18" Foreground="Gray"/>
                        <TextBlock Text="转发" FontFamily="{ThemeResource MiSansRegular}" Foreground="Gray"/>
                    </StackPanel>
                </Button>
                <Button Grid.Column="1" HorizontalAlignment="Center" Style="{StaticResource TransparentButton}" Click="DynamicCommentClick">
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <ImageIcon Source="ms-appx:///Assets/Icon/Comment2.svg" Margin="0,0,0,0" Width="18" Foreground="Gray"/>
                        <TextBlock Text="{x:Bind CommunityInformation.CommentCount}" FontFamily="{ThemeResource MiSansRegular}" Foreground="Gray"/>
                    </StackPanel>
                </Button>
                <Button Grid.Column="2" HorizontalAlignment="Center" Style="{StaticResource TransparentButton}">
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <ImageIcon Source="ms-appx:///Assets/Icon/Like2.svg" Margin="0,0,0,0" Width="18" Foreground="Gray"/>
                        <TextBlock Text="{x:Bind CommunityInformation.LikeCount}" FontFamily="{ThemeResource MiSansRegular}" Foreground="Gray"/>
                    </StackPanel>
                </Button>
            </Grid>
        </StackPanel>
    </DataTemplate>

    <DataTemplate x:Key="VideoPageTemplate" x:DataType="bv:Page">
        <Grid VerticalAlignment="Center" Padding="16,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBlock Text="{x:Bind GetPage}" FontFamily="{ThemeResource MiSansRegular}"/>
            <TextBlock Grid.Column="1" Margin="8,0,8,0" Text="{x:Bind Part}" FontFamily="{ThemeResource MiSansRegular}" TextTrimming="CharacterEllipsis"/>
            <TextBlock Grid.Column="2" Text="{x:Bind GetDuration()}" Foreground="Gray" FontFamily="{ThemeResource MiSansRegular}"/>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="VideoEpisodeTemplate" x:DataType="bmodelMedia:VideoInformation">
        <Grid VerticalAlignment="Center" Padding="16,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBlock Grid.Column="0" Margin="0,0,8,0" Text="{x:Bind Identifier.Title}" FontFamily="{ThemeResource MiSansRegular}" TextTrimming="CharacterEllipsis"/>
            <TextBlock Grid.Column="1" Text="{x:Bind ext:BiliUIExtensions.GetDuration((bmodelMedia:VideoInformation))}" Foreground="Gray" FontFamily="{ThemeResource MiSansNormal}"/>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="TagTemplate" x:DataType="bmodelBase:BiliTag">
        <Grid CornerRadius="14" BorderThickness="1" BorderBrush="#e8e9ea" Background="#e8e9ea" Padding="8,2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <!--<cont2:ImageEx2 Margin="-8,-2,4,-2" Source="{x:Bind Cover}" Visibility="{x:Bind HasCover}" Style="{StaticResource DynamicImageStyle}" Width="26" Height="26" DecodePixelWidth="26" DecodePixelHeight="26"/>-->
            <TextBlock Grid.Column="1" Text="{x:Bind Name}" FontFamily="{ThemeResource MiSansRegular}" Foreground="#62676e" VerticalAlignment="Center" />
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="StaffTemplate" x:DataType="bmodelUser:PublisherProfile">
        <Grid MinWidth="60" Tapped="StaffTapped">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <cont2:ImageEx2 Source="{x:Bind User.Avatar.Uri}" Style="{StaticResource DynamicImageStyle}" CornerRadius="20" Width="40" Height="40" DecodePixelWidth="40" DecodePixelHeight="40"/>
            <Border HorizontalAlignment="Right" VerticalAlignment="Top" Background="#9f05aeec" CornerRadius="4" Padding="4,0">
                <TextBlock Text="{x:Bind Role}" FontSize="12" FontFamily="{ThemeResource MiSansRegular}" Foreground="White"/>
            </Border>
            <TextBlock Grid.Row="1" Margin="0,4,0,0" FontSize="12" Text="{x:Bind User.Name}" FontFamily="{ThemeResource MiSansMedium}" HorizontalAlignment="Center" MaxWidth="76" TextTrimming="CharacterEllipsis"/>
            <Grid.ContextFlyout>
                <Flyout>
                    <cont3:UserCard Margin="-16" Mid="{x:Bind User.Id}" />
                </Flyout>
            </Grid.ContextFlyout>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="ChapterListTemplate" x:DataType="models:CustomChapterInfo">
        <Grid
            Width="284" Height="160"
            >
            <cont2:ImageEx2 
                Style="{StaticResource LocalVideoImageStyle}"
                Width="284" Height="160" DecodePixelWidth="284" DecodePixelHeight="160"
                Source="{x:Bind helper2:BaseItemDtoHelper.GetChapterImage(ImageTag, Index, ParentId)}"
                />
            <StackPanel Orientation="Vertical" 
                        Background="#90000000"
                        VerticalAlignment="Bottom"
                        HorizontalAlignment="Left"
                        Spacing="4"
                        Padding="8,4,8,4"
                        >
                <TextBlock Text="{x:Bind Name}" Foreground="White" FontFamily="{ThemeResource MiSansRegular}"/>
                <TextBlock Text="{x:Bind helper2:BaseItemDtoHelper.GetJellyfinDuration(StartPositionTicks)}" Foreground="White" FontFamily="{ThemeResource MiSansRegular}"/>
            </StackPanel>
        </Grid>
    </DataTemplate>
</ResourceDictionary>
